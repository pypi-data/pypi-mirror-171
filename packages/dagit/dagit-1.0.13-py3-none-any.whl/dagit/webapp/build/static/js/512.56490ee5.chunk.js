"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[512],{13113:function(e,n,r){r.r(n),r.d(n,{OverviewRoot:function(){return we},default:function(){return be}});var t,o,i,s,a,l=r(325),c=r(27601),d=r(81745),u=r(2803),h=r(99500),p=r(47427),x=r(19065),m=r(73701),g=r(3159),j=r(32030),f=r(34595),v=r(7838),y=r(89646),w=r(31112),b=r(12745),S=r(88863),E=r(12436),k=r(78093),C=r(39061),N=r(77523),O=r(76336),_=r(37099),L=r(33902),I=r(11831),A=r(54268),q=r(519),z=r(3580),T=r(65864),R=r(71824),P=r(36753),Z=r(16279),$=r(32289),F=function(e){var n=e.repos,r=l.useRef(null),t=(0,R.N)("jobs-virtualized-expansion-state"),o=t.expandedKeys,i=t.onToggle,s=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.jobs;e.push({type:"header",repoAddress:r,jobCount:t.length});var i=(0,L.l)(r);o.includes(i)&&t.forEach((function(n){var t=n.isJob,o=n.name;e.push({type:"job",repoAddress:r,isJob:t,name:o})}))})),e}),[n,o]),a=(0,T.w)(n.map((function(e){return e.repoAddress.name}))),c=(0,q.useVirtualizer)({count:s.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=s[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),d=c.getTotalSize(),u=c.getVirtualItems();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(j.x,{border:{side:"horizontal",width:1,color:v.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"34% 30% 20% 8% 8%",height:"32px",fontSize:"12px",color:v.w.Gray600},children:[(0,$.jsx)(z.qN,{children:"Job name"}),(0,$.jsx)(z.qN,{children:"Schedules/sensors"}),(0,$.jsx)(z.qN,{children:"Latest run"}),(0,$.jsx)(z.qN,{children:"Run history"}),(0,$.jsx)(z.qN,{children:"Actions"})]}),(0,$.jsx)("div",{style:{overflow:"hidden"},children:(0,$.jsx)(z.W2,{ref:r,children:(0,$.jsx)(z.Nh,{$totalHeight:d,children:u.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=s[n];return"header"===l.type?(0,$.jsx)(Z.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,showLocation:a.has(l.repoAddress.name),rightElement:(0,$.jsx)(I.u,{content:1===l.jobCount?"1 job":"".concat(l.jobCount," jobs"),placement:"top",children:(0,$.jsx)(A.V,{intent:"primary",children:l.jobCount})})},r):(0,$.jsx)(P.b,{name:l.name,isJob:l.isJob,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},G=r(79557),W=function(){(0,k.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(O.C5),i=o.allRepos,s=o.visibleRepos,a=i.length,c=(0,m.a)(V,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),d=c.data,u=c.loading,h=U(d),p=r.trim().toLocaleLowerCase(),g=p.length>0,E=l.useMemo((function(){var e=new Set(s.map((function(e){return(0,L.l)((0,_.k)(e.repository.name,e.repositoryLocation.name))})));return h.filter((function(n){var r=n.repoAddress;return e.has((0,L.l)(r))}))}),[h,s]),C=l.useMemo((function(){var e=p.toLocaleLowerCase();return E.map((function(n){return{repoAddress:n.repoAddress,jobs:n.jobs.filter((function(n){return n.name.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.jobs.length>0}))}),[E,p]);return(0,$.jsxs)(j.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,$.jsx)(w.m,{title:(0,$.jsx)(b.X6,{children:"Overview"}),tabs:(0,$.jsx)(G.d,{tab:"jobs"})}),(0,$.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[a>1?(0,$.jsx)(N.C,{}):null,(0,$.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"340px"}})]}),u&&!a?(0,$.jsx)(j.x,{padding:64,children:(0,$.jsx)(f.$,{purpose:"page"})}):u&&!d?(0,$.jsx)(j.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,$.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,$.jsx)(f.$,{purpose:"body-text"}),(0,$.jsx)("div",{style:{color:v.w.Gray600},children:"Loading jobs\u2026"})]})}):C.length?(0,$.jsx)(F,{repos:C}):g?(0,$.jsx)(j.x,{padding:{top:20},children:(0,$.jsx)(y.t,{icon:"search",title:"No matching jobs",description:(0,$.jsxs)("div",{children:["No jobs matching ",(0,$.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,$.jsx)(j.x,{padding:{top:20},children:(0,$.jsx)(y.t,{icon:"search",title:"No jobs",description:"No jobs were found in this workspace"})})]})},U=function(e){return l.useMemo((function(){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,p.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.pipelines,u=(0,_.k)(c,i.name),h=d.filter((function(e){var n=e.name;return!(0,C.pv)(n)})).map((function(e){return{isJob:e.isJob,name:e.name}}));h.length>0&&t.push({repoAddress:u,jobs:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return t}),[e])},V=(0,g.Ps)(t||(t=(0,h.Z)(["\n  query OverviewJobsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                pipelines {\n                  id\n                  name\n                  isJob\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),E.Bq),J=r(60736),K=r(75453),M=r(8358),H=r(45352),X=r(56313),Y=r(31834),D=function(e){var n=e.repos,r=l.useRef(null),t=(0,R.N)("schedules-virtualized-expansion-state"),o=t.expandedKeys,i=t.onToggle,s=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.schedules;e.push({type:"header",repoAddress:r,scheduleCount:t.length});var i=(0,L.l)(r);o.includes(i)&&t.forEach((function(n){e.push({type:"schedule",repoAddress:r,name:n})}))})),e}),[n,o]),a=(0,T.w)(n.map((function(e){return e.repoAddress.name}))),c=(0,q.useVirtualizer)({count:s.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=s[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),d=c.getTotalSize(),u=c.getVirtualItems();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(j.x,{border:{side:"horizontal",width:1,color:v.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"76px 28% 30% 10% 20% 10%",height:"32px",fontSize:"12px",color:v.w.Gray600},children:[(0,$.jsx)(z.qN,{}),(0,$.jsx)(z.qN,{children:"Schedule name"}),(0,$.jsx)(z.qN,{children:"Schedule"}),(0,$.jsx)(z.qN,{children:"Last tick"}),(0,$.jsx)(z.qN,{children:"Last run"}),(0,$.jsx)(z.qN,{children:"Actions"})]}),(0,$.jsx)("div",{style:{overflow:"hidden"},children:(0,$.jsx)(z.W2,{ref:r,children:(0,$.jsx)(z.Nh,{$totalHeight:d,children:u.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=s[n];return"header"===l.type?(0,$.jsx)(Z.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,showLocation:a.has(l.repoAddress.name),rightElement:(0,$.jsx)(I.u,{content:1===l.scheduleCount?"1 schedule":"".concat(l.scheduleCount," schedules"),placement:"top",children:(0,$.jsx)(A.V,{intent:"primary",children:l.scheduleCount})})},r):(0,$.jsx)(Y.i,{name:l.name,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},B=function(){(0,k.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(O.C5).allRepos.length,i=(0,m.a)(re,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),s=i.data,a=i.loading,c=ne(s),d=r.trim().toLocaleLowerCase(),u=d.length>0,h=l.useMemo((function(){var e=d.toLocaleLowerCase();return c.map((function(n){return{repoAddress:n.repoAddress,schedules:n.schedules.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.schedules.length>0}))}),[c,d]);return(0,$.jsxs)(j.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,$.jsx)(w.m,{title:(0,$.jsx)(b.X6,{children:"Overview"}),tabs:(0,$.jsx)(G.d,{tab:"schedules"})}),(0,$.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o>0?(0,$.jsx)(N.C,{}):null,(0,$.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by schedule name\u2026",style:{width:"340px"}})]}),a&&!o?(0,$.jsx)(j.x,{padding:64,children:(0,$.jsx)(f.$,{purpose:"page"})}):(0,$.jsxs)($.Fragment,{children:["InstigationStates"===(null===s||void 0===s?void 0:s.unloadableInstigationStatesOrError.__typename)?(0,$.jsx)(Q,{count:s.unloadableInstigationStatesOrError.results.length}):null,a&&!s?(0,$.jsx)(j.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,$.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,$.jsx)(f.$,{purpose:"body-text"}),(0,$.jsx)("div",{style:{color:v.w.Gray600},children:"Loading schedules\u2026"})]})}):h.length?(0,$.jsx)(D,{repos:h}):u?(0,$.jsx)(j.x,{padding:{top:20},children:(0,$.jsx)(y.t,{icon:"search",title:"No matching schedules",description:(0,$.jsxs)("div",{children:["No schedules matching ",(0,$.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,$.jsx)(j.x,{padding:{top:20},children:(0,$.jsx)(y.t,{icon:"search",title:"No schedules",description:"No schedules were found in this workspace"})})]})]})},Q=function(e){var n=e.count,r=l.useState(!1),t=(0,x.Z)(r,2),o=t[0],i=t[1];if(!n)return null;var s=1===n?"1 unloadable schedule":"".concat(n," unloadable schedules");return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(j.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:v.w.KeylineGray},children:(0,$.jsx)(J.b,{intent:"warning",title:s,description:(0,$.jsxs)(j.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,$.jsx)("div",{children:"Schedules were previously started but now cannot be loaded. They may be part of a different workspace or from a schedule or repository that no longer exists in code. You can turn them off, but you cannot turn them back on."}),(0,$.jsx)(K.zx,{onClick:function(){return i(!0)},children:1===n?"View unloadable schedule":"View unloadable schedules"})]})})}),(0,$.jsxs)(M.Vq,{isOpen:o,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,$.jsx)(j.x,{padding:{bottom:8},children:(0,$.jsx)(ee,{})}),(0,$.jsx)(M.cN,{children:(0,$.jsx)(K.zx,{intent:"primary",onClick:function(){return i(!1)},children:"Done"})})]})]})},ee=function(){var e=(0,m.a)(te).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,$.jsx)(X.Y,{scheduleStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,$.jsx)(E.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,$.jsx)(f.$,{purpose:"section"})},ne=function(e){return l.useMemo((function(){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,p.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.schedules,u=(0,_.k)(c,i.name),h=d.map((function(e){return e.name}));h.length>0&&t.push({repoAddress:u,schedules:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return t}),[e])},re=(0,g.Ps)(o||(o=(0,h.Z)(["\n  query OverviewSchedulesQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                schedules {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n  }\n\n  ","\n"])),E.Bq),te=(0,g.Ps)(i||(i=(0,h.Z)(["\n  query UnloadableSchedulesQuery {\n    unloadableInstigationStatesOrError(instigationType: SCHEDULE) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),H.ai,E.Bq),oe=r(19377),ie=function(e){var n=e.repos,r=l.useRef(null),t=(0,R.N)("sensors-virtualized-expansion-state"),o=t.expandedKeys,i=t.onToggle,s=l.useMemo((function(){var e=[];return n.forEach((function(n){var r=n.repoAddress,t=n.sensors;e.push({type:"header",repoAddress:r,sensorCount:t.length});var i=(0,L.l)(r);o.includes(i)&&t.forEach((function(n){e.push({type:"sensor",repoAddress:r,name:n})}))})),e}),[n,o]),a=(0,T.w)(n.map((function(e){return e.repoAddress.name}))),c=(0,q.useVirtualizer)({count:s.length,getScrollElement:function(){return r.current},estimateSize:function(e){var n=s[e];return"header"===(null===n||void 0===n?void 0:n.type)?32:64},overscan:10}),d=c.getTotalSize(),u=c.getVirtualItems();return(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(j.x,{border:{side:"horizontal",width:1,color:v.w.KeylineGray},style:{display:"grid",gridTemplateColumns:"76px 38% 30% 10% 20%",height:"32px",fontSize:"12px",color:v.w.Gray600},children:[(0,$.jsx)(z.qN,{}),(0,$.jsx)(z.qN,{children:"Sensor name"}),(0,$.jsx)(z.qN,{children:"Frequency"}),(0,$.jsx)(z.qN,{children:"Last tick"}),(0,$.jsx)(z.qN,{children:"Last run"})]}),(0,$.jsx)("div",{style:{overflow:"hidden"},children:(0,$.jsx)(z.W2,{ref:r,children:(0,$.jsx)(z.Nh,{$totalHeight:d,children:u.map((function(e){var n=e.index,r=e.key,t=e.size,o=e.start,l=s[n];return"header"===l.type?(0,$.jsx)(Z.vG,{repoAddress:l.repoAddress,height:t,start:o,onToggle:i,showLocation:a.has(l.repoAddress.name),rightElement:(0,$.jsx)(I.u,{content:1===l.sensorCount?"1 sensor":"".concat(l.sensorCount," sensors"),placement:"top",children:(0,$.jsx)(A.V,{intent:"primary",children:l.sensorCount})})},r):(0,$.jsx)(oe.R,{name:l.name,repoAddress:l.repoAddress,height:t,start:o},r)}))})})})]})},se=function(){(0,k.Px)();var e=l.useState(""),n=(0,x.Z)(e,2),r=n[0],t=n[1],o=l.useContext(O.C5).allRepos.length,i=(0,m.a)(de,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),s=i.data,a=i.loading,c=ce(s),d=r.trim().toLocaleLowerCase(),u=d.length>0,h=l.useMemo((function(){var e=d.toLocaleLowerCase();return c.map((function(n){return{repoAddress:n.repoAddress,sensors:n.sensors.filter((function(n){return n.toLocaleLowerCase().includes(e)}))}})).filter((function(e){return e.sensors.length>0}))}),[c,d]);return(0,$.jsxs)(j.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,$.jsx)(w.m,{title:(0,$.jsx)(b.X6,{children:"Overview"}),tabs:(0,$.jsx)(G.d,{tab:"sensors"})}),(0,$.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[o>0?(0,$.jsx)(N.C,{}):null,(0,$.jsx)(S.oi,{icon:"search",value:r,onChange:function(e){return t(e.target.value)},placeholder:"Filter by sensor name\u2026",style:{width:"340px"}})]}),a&&!o?(0,$.jsx)(j.x,{padding:64,children:(0,$.jsx)(f.$,{purpose:"page"})}):(0,$.jsxs)($.Fragment,{children:["InstigationStates"===(null===s||void 0===s?void 0:s.unloadableInstigationStatesOrError.__typename)?(0,$.jsx)(ae,{count:s.unloadableInstigationStatesOrError.results.length}):null,a&&!s?(0,$.jsx)(j.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,$.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,$.jsx)(f.$,{purpose:"body-text"}),(0,$.jsx)("div",{style:{color:v.w.Gray600},children:"Loading sensors\u2026"})]})}):h.length?(0,$.jsx)(ie,{repos:h}):u?(0,$.jsx)(j.x,{padding:{top:20},children:(0,$.jsx)(y.t,{icon:"search",title:"No matching sensors",description:(0,$.jsxs)("div",{children:["No sensors matching ",(0,$.jsx)("strong",{children:r})," were found in this workspace"]})})}):(0,$.jsx)(j.x,{padding:{top:20},children:(0,$.jsx)(y.t,{icon:"search",title:"No sensors",description:"No sensors were found in this workspace"})})]})]})},ae=function(e){var n=e.count,r=l.useState(!1),t=(0,x.Z)(r,2),o=t[0],i=t[1];if(!n)return null;var s=1===n?"1 unloadable sensor":"".concat(n," unloadable sensors");return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(j.x,{padding:{vertical:16,horizontal:24},border:{side:"top",width:1,color:v.w.KeylineGray},children:(0,$.jsx)(J.b,{intent:"warning",title:s,description:(0,$.jsxs)(j.x,{flex:{direction:"column",gap:12,alignItems:"flex-start"},children:[(0,$.jsx)("div",{children:"Sensors were previously started but now cannot be loaded. They may be part of a different workspace or from a sensor or repository that no longer exists in code. You can turn them off, but you cannot turn them back on."}),(0,$.jsx)(K.zx,{onClick:function(){return i(!0)},children:1===n?"View unloadable sensor":"View unloadable sensors"})]})})}),(0,$.jsxs)(M.Vq,{isOpen:o,title:"Unloadable schedules",style:{width:"90vw",maxWidth:"1200px"},children:[(0,$.jsx)(j.x,{padding:{bottom:8},children:(0,$.jsx)(le,{})}),(0,$.jsx)(M.cN,{children:(0,$.jsx)(K.zx,{intent:"primary",onClick:function(){return i(!1)},children:"Done"})})]})]})},le=function(){var e=(0,m.a)(ue).data;return e?"InstigationStates"===(null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError.__typename)?(0,$.jsx)(X.e,{sensorStates:e.unloadableInstigationStatesOrError.results,showSubheading:!1}):(0,$.jsx)(E.T9,{error:null===e||void 0===e?void 0:e.unloadableInstigationStatesOrError}):(0,$.jsx)(f.$,{purpose:"section"})},ce=function(e){return l.useMemo((function(){if("Workspace"!==(null===e||void 0===e?void 0:e.workspaceOrError.__typename))return[];var n,r=e.workspaceOrError.locationEntries.map((function(e){return e.locationOrLoadError})),t=[],o=(0,p.Z)(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if("RepositoryLocation"===(null===i||void 0===i?void 0:i.__typename)){var s,a=(0,p.Z)(i.repositories);try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.name,d=l.sensors,u=(0,_.k)(c,i.name),h=d.map((function(e){return e.name}));h.length>0&&t.push({repoAddress:u,sensors:h})}}catch(x){a.e(x)}finally{a.f()}}}}catch(x){o.e(x)}finally{o.f()}return t}),[e])},de=(0,g.Ps)(s||(s=(0,h.Z)(["\n  query OverviewSensorsQuery {\n    workspaceOrError {\n      ... on Workspace {\n        locationEntries {\n          id\n          locationOrLoadError {\n            ... on RepositoryLocation {\n              id\n              name\n              repositories {\n                id\n                name\n                sensors {\n                  id\n                  name\n                  description\n                }\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n        }\n      }\n    }\n  }\n\n  ","\n"])),E.Bq),ue=(0,g.Ps)(a||(a=(0,h.Z)(["\n  query UnloadableSensorsQuery {\n    unloadableInstigationStatesOrError(instigationType: SENSOR) {\n      ... on InstigationStates {\n        results {\n          id\n          ...InstigationStateFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),H.ai,E.Bq),he=r(30804),pe=r(87011),xe=r(82348),me=r(86771),ge=r(73478),je=r(12188),fe=36e5,ve=function(e){switch(e){case"1":return fe;case"6":return 216e5;case"12":return 432e5;case"24":return 864e5}},ye=function(){(0,k.Px)(),(0,xe.j)("Runs");var e=l.useContext(O.C5),n=e.allRepos,r=e.visibleRepos,t=l.useState(""),o=(0,x.Z)(t,2),i=o[0],s=o[1],a=(0,ge.S)("12"),c=(0,x.Z)(a,2),d=c[0],u=c[1],h=l.useState((function(){return Date.now()})),p=(0,x.Z)(h,2),m=p[0],g=p[1],f=l.useState((function(){return 0})),v=(0,x.Z)(f,2),y=v[0],E=v[1];l.useEffect((function(){g(Date.now());var e=setInterval((function(){g(Date.now())}),6e4);return function(){clearInterval(e)}}),[d]);var C=l.useCallback((function(){E((function(e){return e-ve(d)}))}),[d]),L=l.useCallback((function(){E((function(e){return e+ve(d)}))}),[d]),I=l.useCallback((function(){E(0)}),[]),A=l.useMemo((function(){return[m-Number(d)*fe+y,m+36e5+y]}),[d,m,y]),q=l.useMemo((function(){var e=i.toLocaleLowerCase().trim(),n=r.flatMap((function(n){var r=(0,_.k)(n.repository.name,n.repositoryLocation.name);return n.repository.pipelines.filter((function(n){return n.name.toLocaleLowerCase().includes(e)})).map((function(e){return(0,je.G)(r,e.name)}))}));return new Set(n)}),[r,i]);return(0,$.jsxs)(he.T,{children:[(0,$.jsx)(w.m,{title:(0,$.jsx)(b.X6,{children:"Overview"}),tabs:(0,$.jsx)(G.d,{tab:"timeline"})}),(0,$.jsxs)(j.x,{padding:{horizontal:24,vertical:16},flex:{alignItems:"center",justifyContent:"space-between"},children:[(0,$.jsxs)(j.x,{flex:{direction:"row",alignItems:"center",gap:12,grow:0},children:[n.length>1&&(0,$.jsx)(N.C,{}),(0,$.jsx)(S.oi,{icon:"search",value:i,onChange:function(e){return s(e.target.value)},placeholder:"Filter by job name\u2026",style:{width:"200px"}})]}),(0,$.jsxs)(j.x,{flex:{direction:"row",gap:16,alignItems:"center"},children:[(0,$.jsx)(pe.h,{activeItems:new Set([d]),buttons:[{id:"1",label:"1hr"},{id:"6",label:"6hr"},{id:"12",label:"12hr"},{id:"24",label:"24hr"}],onClick:function(e){return u(e)}}),(0,$.jsxs)(j.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,$.jsx)(K.zx,{onClick:C,children:"\u2190"}),(0,$.jsx)(K.zx,{onClick:I,children:"Now"}),(0,$.jsx)(K.zx,{onClick:L,children:"\u2192"})]})]})]}),(0,$.jsx)(me.C,{range:A,visibleJobKeys:q})]})},we=function(){return(0,d.gV)().flagNewWorkspace?(0,$.jsxs)(c.rs,{children:[(0,$.jsx)(c.AW,{path:"/overview/timeline",children:(0,$.jsx)(ye,{})}),(0,$.jsx)(c.AW,{path:"/overview/jobs",children:(0,$.jsx)(W,{})}),(0,$.jsx)(c.AW,{path:"/overview/schedules",children:(0,$.jsx)(B,{})}),(0,$.jsx)(c.AW,{path:"/overview/sensors",children:(0,$.jsx)(se,{})}),(0,$.jsx)(c.AW,{path:"/overview/backfills",children:(0,$.jsx)(u.A,{})}),(0,$.jsx)(c.AW,{path:"*",render:function(){return(0,$.jsx)(c.l_,{to:"/overview/timeline"})}})]}):(0,$.jsx)(c.l_,{to:"/instance/overview"})},be=we},3580:function(e,n,r){r.d(n,{qN:function(){return a},E5:function(){return l},W2:function(){return c},Nh:function(){return d},X2:function(){return u}});var t=r(922),o=r(32030),i=r(7838),s=(r(325),r(32289)),a=function(e){var n=e.children;return(0,s.jsx)(o.x,{padding:{vertical:8,horizontal:24},border:{side:"right",width:1,color:i.w.KeylineGray},style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:n})},l=function(e){var n=e.children;return(0,s.jsx)(o.x,{padding:{horizontal:24,vertical:12},flex:{direction:"column",justifyContent:"flex-start"},style:{color:i.w.Gray500,overflow:"hidden"},border:{side:"right",width:1,color:i.w.KeylineGray},children:n})},c=t.ZP.div.withConfig({displayName:"VirtualizedTable__Container",componentId:"sc-1e309bi-0"})(["height:100%;overflow:auto;"]),d=t.ZP.div.attrs((function(e){var n=e.$totalHeight;return{style:{height:"".concat(n,"px")}}})).withConfig({displayName:"VirtualizedTable__Inner",componentId:"sc-1e309bi-1"})(["position:relative;width:100%;"]),u=t.ZP.div.attrs((function(e){var n=e.$height,r=e.$start;return{style:{height:"".concat(n,"px"),transform:"translateY(".concat(r,"px)")}}})).withConfig({displayName:"VirtualizedTable__Row",componentId:"sc-1e309bi-2"})(["left:0;position:absolute;right:0;top:0;overflow:hidden;"])},36753:function(e,n,r){r.d(n,{b:function(){return O}});var t,o=r(99500),i=r(59019),s=r(19065),a=r(922),l=r(65880),c=r(3159),d=r(7838),u=r(85899),h=r(12745),p=r(32030),x=r(325),m=r(74549),g=r(15219),j=r(63744),f=r(86476),v=r(9091),y=r(55752),w=r(9315),b=r(86875),S=r(3580),E=r(16279),k=r(76336),C=r(25582),N=r(32289),O=function(e){var n=e.name,r=e.isJob,t=e.repoAddress,o=e.start,a=e.height,c=(0,l.t)(L,{fetchPolicy:"cache-and-network",variables:{selector:(0,k._T)(t,n)}}),y=(0,s.Z)(c,2),w=y[0],b=y[1];(0,E.v5)(w);var O=b.data,I=x.useMemo((function(){if("Pipeline"===(null===O||void 0===O?void 0:O.pipelineOrError.__typename)){var e=O.pipelineOrError;return{schedules:e.schedules,sensors:e.sensors}}return{schedules:[],sensors:[]}}),[O]),A=I.schedules,q=I.sensors,z=x.useMemo((function(){if("Pipeline"===(null===O||void 0===O?void 0:O.pipelineOrError.__typename)){var e=O.pipelineOrError.runs;if(e.length)return(0,i.Z)(e)}return[]}),[O]);return(0,N.jsx)(S.X2,{$height:a,$start:o,children:(0,N.jsxs)(_,{border:{side:"bottom",width:1,color:d.w.KeylineGray},children:[(0,N.jsxs)(S.E5,{children:[(0,N.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,N.jsx)(m.rU,{to:(0,C.$U)(t,"/jobs/".concat(n)),children:(0,N.jsx)(u.g,{text:n})})}),(0,N.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,N.jsx)(h.YS,{style:{color:d.w.Gray500,whiteSpace:"nowrap"},children:"Pipeline"===(null===O||void 0===O?void 0:O.pipelineOrError.__typename)?O.pipelineOrError.description:""})})]}),(0,N.jsx)(S.E5,{children:A.length||q.length?(0,N.jsx)(p.x,{flex:{direction:"column",alignItems:"flex-start",gap:8},children:(0,N.jsx)(f.I,{schedules:A,sensors:q,repoAddress:t})}):(0,N.jsx)(E.mq,{queryResult:b})}),(0,N.jsx)(S.E5,{children:z.length?(0,N.jsx)(j.Z,{run:z[0],showButton:!1,showHover:!0,name:n}):(0,N.jsx)(E.mq,{queryResult:b})}),(0,N.jsx)(S.E5,{children:z.length?(0,N.jsx)(v.JH,{jobName:n,runs:(0,i.Z)(z).reverse(),fade:!0}):(0,N.jsx)(E.mq,{queryResult:b})}),(0,N.jsx)(S.E5,{children:(0,N.jsx)("div",{children:(0,N.jsx)(g.c,{job:{isJob:r,name:n,runs:z},repoAddress:t})})})]})})},_=(0,a.ZP)(p.x).withConfig({displayName:"VirtualizedJobRow__RowGrid",componentId:"otbkv8-0"})(["display:grid;grid-template-columns:34% 30% 20% 8% 8%;height:100%;"]),L=(0,c.Ps)(t||(t=(0,o.Z)(["\n  query SingleJobQuery($selector: PipelineSelector!) {\n    pipelineOrError(params: $selector) {\n      ... on Pipeline {\n        id\n        name\n        isJob\n        description\n        runs(limit: 5) {\n          id\n          ...RunTimeFragment\n        }\n        schedules {\n          id\n          ...ScheduleSwitchFragment\n        }\n        sensors {\n          id\n          ...SensorSwitchFragment\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),y.$X,w.J,b.U)},31834:function(e,n,r){r.d(n,{i:function(){return T}});var t,o=r(99500),i=r(19065),s=r(922),a=r(65880),l=r(3159),c=r(7838),d=r(32030),u=r(85899),h=r(12745),p=r(11831),x=r(762),m=r(8412),g=r(75453),j=r(991),f=r(325),v=r(74549),y=r(63744),w=r(62997),b=r(62e3),S=r(55752),E=r(9315),k=r(98191),C=r(68156),N=r(36243),O=r(5484),_=r(90933),L=r(3580),I=r(16279),A=r(76336),q=r(25582),z=r(32289),T=function(e){var n=e.name,r=e.repoAddress,t=e.start,o=e.height,s=(0,A.Ux)(r),l=(0,a.t)(P,{fetchPolicy:"cache-and-network",variables:{selector:{repositoryName:r.name,repositoryLocationName:r.location,scheduleName:n}}}),S=(0,i.Z)(l,2),T=S[0],Z=S[1];(0,I.v5)(T);var $=Z.data,F=f.useMemo((function(){return"Schedule"!==(null===$||void 0===$?void 0:$.scheduleOrError.__typename)?null:$.scheduleOrError}),[$]),G=!(!F||!(0,A.E8)(s,F.pipelineName));return(0,z.jsx)(L.X2,{$height:o,$start:t,children:(0,z.jsxs)(R,{border:{side:"bottom",width:1,color:c.w.KeylineGray},children:[(0,z.jsx)(L.E5,{children:F?(0,z.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,z.jsx)(E.M,{repoAddress:r,schedule:F},n),(0,k.l)(F.scheduleState.status,F.scheduleState.runningCount)]}):null}),(0,z.jsx)(L.E5,{children:(0,z.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,z.jsx)("span",{style:{fontWeight:500},children:(0,z.jsx)(v.rU,{to:(0,q.$U)(r,"/schedules/".concat(n)),children:(0,z.jsx)(u.g,{text:n})})}),F?(0,z.jsx)(h.YS,{children:(0,z.jsx)(b.h,{showIcon:!0,size:"small",pipelineName:F.pipelineName,pipelineHrefContext:r,isJob:G})}):null]})}),(0,z.jsx)(L.E5,{children:F?(0,z.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,z.jsx)("div",{children:(0,z.jsx)(p.u,{position:"top",content:F.cronSchedule,children:(0,z.jsx)("span",{style:{color:c.w.Dark},children:(0,N.A)(F.cronSchedule,F.executionTimezone||"UTC")})})}),(0,z.jsxs)(h.YS,{children:["Next tick:\xa0",F.scheduleState.nextTick&&F.scheduleState.status===O.yn.RUNNING?(0,z.jsx)(C.v,{timestamp:F.scheduleState.nextTick.timestamp,timezone:F.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}}):"None"]})]}):(0,z.jsx)(I.mq,{queryResult:Z})}),(0,z.jsx)(L.E5,{children:null!==F&&void 0!==F&&F.scheduleState.ticks.length?(0,z.jsx)("div",{children:(0,z.jsx)(w.TW,{tick:F.scheduleState.ticks[0],instigationType:O._5.SCHEDULE})}):(0,z.jsx)(I.mq,{queryResult:Z})}),(0,z.jsx)(L.E5,{children:null!==F&&void 0!==F&&F.scheduleState&&(null===F||void 0===F?void 0:F.scheduleState.runs.length)>0?(0,z.jsx)(y.Z,{run:F.scheduleState.runs[0],name:n,showButton:!1,showHover:!0}):(0,z.jsx)(I.mq,{queryResult:Z})}),(0,z.jsx)(L.E5,{children:null!==F&&void 0!==F&&F.partitionSet?(0,z.jsx)(x.J,{content:(0,z.jsxs)(m.v2,{children:[(0,z.jsx)(_.U,{text:"View partition history",icon:"dynamic_feed",target:"_blank",to:(0,q.$U)(r,"/".concat(G?"jobs":"pipelines","/").concat(F.pipelineName,"/partitions"))}),(0,z.jsx)(_.U,{text:"Launch partition backfill",icon:"add_circle",target:"_blank",to:(0,q.$U)(r,"/".concat(G?"jobs":"pipelines","/").concat(F.pipelineName,"/partitions"))})]}),position:"bottom-left",children:(0,z.jsx)(g.zx,{icon:(0,z.jsx)(j.JO,{name:"expand_more"})})}):null})]})})},R=(0,s.ZP)(d.x).withConfig({displayName:"VirtualizedScheduleRow__RowGrid",componentId:"sc-9ps3vz-0"})(["display:grid;grid-template-columns:76px 28% 30% 10% 20% 10%;height:100%;"]),P=(0,l.Ps)(t||(t=(0,o.Z)(["\n  query SingleScheduleQuery($selector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $selector) {\n      ... on Schedule {\n        id\n        name\n        pipelineName\n        description\n        scheduleState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        partitionSet {\n          id\n          name\n        }\n        ...ScheduleSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),E.J,w.dY,S.$X)},19377:function(e,n,r){r.d(n,{R:function(){return O}});var t,o=r(99500),i=r(19065),s=r(922),a=r(65880),l=r(3159),c=r(7838),d=r(32030),u=r(85899),h=r(12745),p=r(325),x=r(74549),m=r(86655),g=r(63744),j=r(62997),f=r(62e3),v=r(55752),y=r(26304),w=r(86875),b=r(5484),S=r(3580),E=r(16279),k=r(76336),C=r(25582),N=r(32289),O=function(e){var n=e.name,r=e.repoAddress,t=e.start,o=e.height,s=(0,k.Ux)(r),l=(0,a.t)(L,{fetchPolicy:"cache-and-network",variables:{selector:{repositoryName:r.name,repositoryLocationName:r.location,sensorName:n}}}),v=(0,i.Z)(l,2),O=v[0],I=v[1];(0,E.v5)(O);var A=I.data,q=p.useMemo((function(){return"Sensor"!==(null===A||void 0===A?void 0:A.sensorOrError.__typename)?null:A.sensorOrError}),[A]);return(0,N.jsx)(S.X2,{$height:o,$start:t,children:(0,N.jsxs)(_,{border:{side:"bottom",width:1,color:c.w.KeylineGray},children:[(0,N.jsx)(S.E5,{children:q?(0,N.jsx)(d.x,{flex:{direction:"column",gap:4},children:(0,N.jsx)(w.c,{repoAddress:r,sensor:q},n)}):null}),(0,N.jsx)(S.E5,{children:(0,N.jsxs)(d.x,{flex:{direction:"column",gap:4},children:[(0,N.jsx)("span",{style:{fontWeight:500},children:(0,N.jsx)(x.rU,{to:(0,C.$U)(r,"/sensors/".concat(n)),children:(0,N.jsx)(u.g,{text:n})})}),null!==q&&void 0!==q&&q.targets&&q.targets.length?(0,N.jsx)(h.YS,{children:(0,N.jsx)(d.x,{flex:{direction:"column",gap:2},children:q.targets.map((function(e){return(0,N.jsx)(f.h,{showIcon:!0,size:"small",pipelineName:e.pipelineName,pipelineHrefContext:r,isJob:!(!s||!(0,k.E8)(s,e.pipelineName))},e.pipelineName)}))})}):null,null!==q&&void 0!==q&&q.metadata.assetKeys&&q.metadata.assetKeys.length?(0,N.jsx)(h.YS,{children:(0,N.jsx)(d.x,{flex:{direction:"column",gap:2},children:q.metadata.assetKeys.map((function(e){return(0,N.jsx)(m.R,{path:e.path,icon:"asset"},e.path.join("/"))}))})}):null]})}),(0,N.jsx)(S.E5,{children:q?(0,N.jsx)("div",{children:(0,y.F)(q.minIntervalSeconds)}):(0,N.jsx)(E.mq,{queryResult:I})}),(0,N.jsx)(S.E5,{children:null!==q&&void 0!==q&&q.sensorState.ticks.length?(0,N.jsx)("div",{children:(0,N.jsx)(j.TW,{tick:q.sensorState.ticks[0],instigationType:b._5.SENSOR})}):(0,N.jsx)(E.mq,{queryResult:I})}),(0,N.jsx)(S.E5,{children:null!==q&&void 0!==q&&q.sensorState&&(null===q||void 0===q?void 0:q.sensorState.runs.length)>0?(0,N.jsx)(g.Z,{run:q.sensorState.runs[0],name:n,showButton:!1,showHover:!0}):(0,N.jsx)(E.mq,{queryResult:I})})]})})},_=(0,s.ZP)(d.x).withConfig({displayName:"VirtualizedSensorRow__RowGrid",componentId:"sc-1sgrm9e-0"})(["display:grid;grid-template-columns:76px 38% 30% 10% 20%;height:100%;"]),L=(0,l.Ps)(t||(t=(0,o.Z)(["\n  query SingleSensorQuery($selector: SensorSelector!) {\n    sensorOrError(sensorSelector: $selector) {\n      ... on Sensor {\n        id\n        name\n        targets {\n          pipelineName\n        }\n        metadata {\n          assetKeys {\n            path\n          }\n        }\n        minIntervalSeconds\n        description\n        sensorState {\n          id\n          runningCount\n          ticks(limit: 1) {\n            id\n            ...TickTagFragment\n          }\n          runs(limit: 1) {\n            id\n            ...RunTimeFragment\n          }\n          nextTick {\n            timestamp\n          }\n        }\n        ...SensorSwitchFragment\n      }\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),w.U,j.dY,v.$X)},16279:function(e,n,r){r.d(n,{vG:function(){return l},mq:function(){return c},v5:function(){return d}});var t=r(7838),o=r(325),i=r(35815),s=r(3580),a=r(32289),l=function(e){var n=e.repoAddress,r=e.height,t=e.start,o=e.onToggle,l=e.showLocation,c=e.rightElement;return(0,a.jsx)(s.X2,{$height:r,$start:t,children:(0,a.jsx)(i.L,{repoName:n.name,repoLocation:n.location,expanded:!0,onClick:function(){return o(n)},showLocation:l,rightElement:c})})},c=function(e){var n=e.queryResult,r=n.called,o=n.loading,i=n.data;return(0,a.jsx)("div",{style:{color:t.w.Gray500},children:!r||o&&!i?"Loading":"None"})},d=function(e){o.useEffect((function(){var n=setTimeout((function(){e()}),100);return function(){return clearTimeout(n)}}),[e])}}}]);
//# sourceMappingURL=512.56490ee5.chunk.js.map
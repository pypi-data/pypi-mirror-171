"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1476],{62694:function(e,n,i){i.d(n,{Z:function(){return R}});var r=i(82394),t=i(12757),o=i(12691),l=i.n(o),c=i(34376),u=i.n(c),s=i(82684),a=i(83455),d=i(60328),p=i(47999),f=i(93461),h=i(67971),j=i(10919),b=i(47409),x=i(86673),g=i(54283),m=i(17903),v=i(19711),Z=i(41374),O=i(73942),_=i(10503),y=i(46313),C=i(23831),w=i(49125),k=i(37391),P=y.default.div.withConfig({displayName:"Tablestyle__TableContainerStyle",componentId:"sc-8ammqd-0"})(["position:relative;overflow:auto;"," ",""],k.w5,(function(e){return e.minHeight&&"\n    min-height: ".concat(e.minHeight,"px;\n  ")})),D=y.default.div.withConfig({displayName:"Tablestyle__PopupContainerStyle",componentId:"sc-8ammqd-1"})(["position:absolute;max-height:","px;z-index:10;border-radius:","px;padding:","px;",""],58*w.iI,O.TR,2*w.iI,(function(e){return"\n    box-shadow: ".concat((e.theme.shadow||C.Z.shadow).popup,";\n    background-color: ").concat((e.theme.interactive||C.Z.interactive).defaultBackground,";\n  ")})),I=i(19395),E=i(96510),L=i(28598);function S(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,r)}return i}function N(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?S(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function T(e){var n=e.onCancel,i=e.onSuccess,r=e.pipelineRun,o=r.status,l=(0,a.Db)(Z.ZP.pipeline_runs.pipeline_schedules.useCreate(null===r||void 0===r?void 0:r.pipeline_schedule_id),{onSuccess:function(e){return(0,E.wD)(e,{callback:function(){i()},onErrorCallback:function(e){var n=e.error,i=n.errors,r=n.message;console.log(i,r)}})}}),c=(0,t.Z)(l,1)[0],u=(0,s.useState)(),f=u[0],j=u[1],m=(0,s.useCallback)((function(){j(!1),c({pipeline_run:{execution_date:null===r||void 0===r?void 0:r.execution_date,pipeline_schedule_id:null===r||void 0===r?void 0:r.pipeline_schedule_id,pipeline_uuid:null===r||void 0===r?void 0:r.pipeline_uuid,variables:null===r||void 0===r?void 0:r.variables}})}),[r]),y=(0,s.useCallback)((function(){j(!1),n(N(N({},r),{},{status:b.V.CANCELLED}))}),[r]);return(0,L.jsxs)("div",{style:{position:"relative"},children:[(0,L.jsx)(d.Z,{beforeIcon:b.V.INITIAL!==o&&(0,L.jsxs)(L.Fragment,{children:[b.V.COMPLETED===o&&(0,L.jsx)(_.Jr,{size:2*w.iI}),[b.V.FAILED,b.V.CANCELLED].includes(o)&&(0,L.jsx)(_.Py,{size:2*w.iI,inverted:b.V.CANCELLED===o}),[b.V.RUNNING].includes(o)&&(0,L.jsx)(g.Z,{color:"white",small:!0})]}),borderRadius:O.D7,danger:b.V.FAILED===o,default:b.V.INITIAL===o,notClickable:b.V.COMPLETED===o,onClick:function(){return j(b.V.COMPLETED!==o)},padding:"6px",primary:b.V.RUNNING===o,warning:b.V.CANCELLED===o,children:b.D[o]}),(0,L.jsx)(p.Z,{onClickOutside:function(){return j(!1)},open:f,children:(0,L.jsxs)(D,{children:[[b.V.RUNNING,b.V.INITIAL].includes(o)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(v.ZP,{bold:!0,color:"#9ECBFF",children:"Run is in progress"}),(0,L.jsx)(x.Z,{mb:1}),(0,L.jsxs)(v.ZP,{children:["This pipeline run is currently ongoing. Retrying will cancel",(0,L.jsx)("br",{}),"the current pipeline run."]}),(0,L.jsx)(v.ZP,{}),(0,L.jsx)(x.Z,{mt:1,children:(0,L.jsxs)(h.Z,{children:[(0,L.jsx)(d.Z,{onClick:function(){y(),m()},children:"Retry run"}),(0,L.jsx)(x.Z,{ml:1}),(0,L.jsx)(d.Z,{onClick:y,children:"Cancel run"})]})})]}),[b.V.CANCELLED,b.V.FAILED].includes(o)&&(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(v.ZP,{bold:!0,color:"#9ECBFF",children:["Run ",o]}),(0,L.jsx)(x.Z,{mb:1}),(0,L.jsx)(v.ZP,{children:"Retry the run with changes you have made to the pipeline."}),(0,L.jsx)(x.Z,{mb:1}),(0,L.jsx)(d.Z,{onClick:m,children:"Retry run"})]})]})})]})}var R=function(e){var n=e.fetchPipelineRuns,i=e.onClickRow,r=e.pipelineRuns,o=e.selectedRun,c=(0,a.Db)((function(e){return Z.ZP.pipeline_runs.useUpdate(e.id)({pipeline_run:e})}),{onSuccess:function(e){return(0,E.wD)(e,{callback:function(){n()},onErrorCallback:function(e){var n=e.error,i=n.errors,r=n.message;console.log(i,r)}})}}),s=(0,t.Z)(c,1)[0],p=[null,1,2,1,1,null],g=[{uuid:"Status"},{uuid:"Date"},{uuid:"Trigger"},{uuid:"Block runs"},{uuid:"Completed"},{uuid:"Logs"}];return i&&(p.push(null),g.push({label:function(){return""},uuid:"action"})),(0,L.jsx)(P,{minHeight:30*w.iI,children:(0,L.jsx)(m.Z,{columnFlex:p,columns:g,isSelectedRow:function(e){return r[e].id===(null===o||void 0===o?void 0:o.id)},onClickRow:i,rows:r.map((function(e,t){var o=e.block_runs_count,c=e.completed_at,a=e.execution_date,p=e.id,g=e.pipeline_schedule_id,m=e.pipeline_schedule_name,Z=e.pipeline_uuid,y=e.status,C=[];return C=t>0&&r[t-1].execution_date==e.execution_date?[(0,L.jsx)(x.Z,{ml:1,children:(0,L.jsxs)(h.Z,{alignItems:"center",children:[(0,L.jsx)(_.TT,{size:2*w.iI,useStroke:!0}),(0,L.jsx)(d.Z,{borderRadius:O.D7,notClickable:!0,padding:"6px",children:(0,L.jsx)(v.ZP,{muted:!0,children:b.D[y]})})]})},"row_item_1"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,muted:!0,children:"-"},"row_item_2"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,muted:!0,children:"-"},"row_item_3"),(0,L.jsx)(l(),{as:"/pipelines/".concat(Z,"/runs/").concat(p),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,L.jsx)(j.Z,{bold:!0,muted:!0,children:"See block runs (".concat(o,")")})},"row_item_4"),(0,L.jsx)(v.ZP,{monospace:!0,muted:!0,children:c&&(0,I.e)(c).toISOString().split(".")[0]||"-"},"row_item_5"),(0,L.jsx)(d.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return u().push("/pipelines/".concat(Z,"/logs?pipeline_run_id[]=").concat(p))},children:(0,L.jsx)(_.B4,{default:!0,size:2*w.iI})},"row_item_6")]:[(0,L.jsx)(T,{onCancel:s,onSuccess:n,pipelineRun:e},"row_item_7"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,children:a},"row_item_8"),(0,L.jsx)(l(),{as:"/pipelines/".concat(Z,"/triggers/").concat(g),href:"/pipelines/[pipeline]/triggers/[...slug]",passHref:!0,children:(0,L.jsx)(j.Z,{bold:!0,sameColorAsText:!0,children:m})},"row_item_9"),(0,L.jsx)(l(),{as:"/pipelines/".concat(Z,"/runs/").concat(p),href:"/pipelines/[pipeline]/runs/[run]",passHref:!0,children:(0,L.jsx)(j.Z,{bold:!0,sameColorAsText:!0,children:"See block runs (".concat(o,")")})},"row_item_10"),(0,L.jsx)(v.ZP,{default:!0,monospace:!0,children:c&&(0,I.e)(c).toISOString().split(".")[0]||"-"},"row_item_11"),(0,L.jsx)(d.Z,{default:!0,iconOnly:!0,noBackground:!0,onClick:function(){return u().push("/pipelines/".concat(Z,"/logs?pipeline_run_id[]=").concat(p))},children:(0,L.jsx)(_.B4,{default:!0,size:2*w.iI})},"row_item_12")],i&&C.push((0,L.jsx)(f.Z,{flex:1,justifyContent:"flex-end",children:(0,L.jsx)(_._Q,{default:!0,size:2*w.iI})})),C})),uuid:"pipeline-runs"})})}},56681:function(e,n,i){i.d(n,{G:function(){return v},Z:function(){return Z}});var r=i(12757),t=i(82394),o=i(26304),l=i(1583),c=i(22673),u=i(86532),s=i(86673),a=i(19711),d=i(17903),p=i(49125),f=i(19395),h=i(28598),j=["height","heightOffset","pipeline","selectedRun","selectedTab","setSelectedTab"];function b(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,r)}return i}function x(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?b(Object(i),!0).forEach((function(n){(0,t.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var g={uuid:"Run details"},m={uuid:"Dependency tree"},v=[m,g];function Z(e){var n=e.height,i=e.heightOffset,t=e.pipeline,b=e.selectedRun,Z=e.selectedTab,O=e.setSelectedTab,_=x({},(0,o.Z)(e,j));b?_.blockStatus=(0,f.I)(null===b||void 0===b?void 0:b.block_runs):_.noStatus=!0;var y=null===b||void 0===b?void 0:b.variables,C=[];y&&JSON.stringify(y,null,2).split("\n").forEach((function(e){C.push("    ".concat(e))}));var w=b&&[["Run ID",null===b||void 0===b?void 0:b.id],["Variables",(0,h.jsx)(c.Z,{language:"json",small:!0,source:C.join("\n")})]],k=b&&(0,h.jsx)(s.Z,{pb:p.cd,px:p.cd,children:(0,h.jsx)(d.Z,{alignTop:!0,columnFlex:[null,1],columnMaxWidth:function(e){return 1===e?"100px":null},rows:w.map((function(e){var n=(0,r.Z)(e,2),i=n[0],t=n[1];return[(0,h.jsx)(a.ZP,{monospace:!0,muted:!0,children:i}),(0,h.jsx)(a.ZP,{monospace:!0,textOverflow:!0,children:t})]})),uuid:"LogDetail"})}),P=Z&&O;return(0,h.jsxs)(h.Fragment,{children:[P&&(0,h.jsx)(s.Z,{py:p.cd,children:(0,h.jsx)(l.Z,{onClickTab:O,selectedTabUUID:null===Z||void 0===Z?void 0:Z.uuid,tabs:v})}),(!P||m.uuid===(null===Z||void 0===Z?void 0:Z.uuid))&&(0,h.jsx)(u.Z,x(x({},_),{},{height:n,heightOffset:(i||0)+(P?76:0),pipeline:t})),g.uuid===(null===Z||void 0===Z?void 0:Z.uuid)&&k]})}},19395:function(e,n,i){i.d(n,{I:function(){return u},e:function(){return s}});var r=i(82394),t=i(92083),o=i.n(t);function l(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,r)}return i}function c(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?l(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}function u(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var i=n.block_uuid,t=n.completed_at,l=n.started_at,u=n.status,s=null;l&&t&&(s=o()(t).valueOf()-o()(l).valueOf());return c(c({},e),{},(0,r.Z)({},i,{runtime:s,status:u}))}),{})}function s(e){if(!e)return null;var n=new Date(o()(e).valueOf()),i=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(i)}},51099:function(e,n,i){i(82684);var r=i(60328),t=i(67971),o=i(86673),l=i(10503),c=i(73899),u=i(49125),s=i(28598);n.Z=function(e){var n=e.page,i=e.maxPages,a=e.onUpdate,d=e.totalPages,p=[],f=i;if(f>d)p=Array.from({length:d},(function(e,n){return n}));else{var h=Math.floor(f/2),j=n-h;n+h>=d?(j=d-f+2,f-=2):n-h<=0?(j=0,f-=2):(f-=4,j=n-Math.floor(f/2)),p=Array.from({length:f},(function(e,n){return n+j}))}return(0,s.jsx)(s.Fragment,{children:d>0&&(0,s.jsxs)(t.Z,{alignItems:"center",children:[(0,s.jsx)(r.Z,{disabled:0===n,onClick:function(){return a(n-1)},children:(0,s.jsx)(l.Hd,{size:1.5*u.iI,stroke:"#AEAEAE"})}),!p.includes(0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{onClick:function(){return a(0)},borderLess:!0,noBackground:!0,children:1})},0),!p.includes(1)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0)]}),p.map((function(e){return(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{onClick:function(){e!==n&&a(e)},notClickable:e===n,backgroundColor:e===n&&c.a$,borderLess:!0,noBackground:!0,children:e+1})},e)})),!p.includes(d-1)&&(0,s.jsxs)(s.Fragment,{children:[!p.includes(d-2)&&(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{notClickable:!0,noBackground:!0,noPadding:!0,children:"..."})},0),(0,s.jsx)(o.Z,{ml:1,children:(0,s.jsx)(r.Z,{onClick:function(){return a(d-1)},borderLess:!0,noBackground:!0,children:d})},d-1)]}),(0,s.jsx)(o.Z,{ml:1}),(0,s.jsx)(r.Z,{disabled:n===d-1,onClick:function(){return a(n+1)},children:(0,s.jsx)(l.Kw,{size:1.5*u.iI,stroke:"#AEAEAE"})})]})})}},47409:function(e,n,i){i.d(n,{D:function(){return l},V:function(){return o}});var r,t=i(82394),o=i(66050).V,l=(r={},(0,t.Z)(r,o.COMPLETED,"Done"),(0,t.Z)(r,o.CANCELLED,"Cancelled"),(0,t.Z)(r,o.FAILED,"Failed"),(0,t.Z)(r,o.RUNNING,"Running"),(0,t.Z)(r,o.INITIAL,"Ready"),r)},22673:function(e,n,i){var r=i(82684),t=i(73199),o=i.n(t),l=i(71735),c=i(46313),u=i(65292),s=i(23831),a=i(2005),d=i(49125),p=i(28598);n.Z=function(e){var n=e.language,i=e.maxWidth,t=e.showLineNumbers,f=e.small,h=e.source,j=e.wrapLines,b=(0,r.useContext)(c.ThemeContext);return(0,p.jsx)(o(),{source:h,renderers:{code:function(e){var r=e.value;return(0,p.jsx)(l.Z,{customStyle:{backgroundColor:(b.background||s.Z.background).popup,border:"none",borderRadius:"none",boxShadow:"none",fontFamily:a.Vp,fontSize:f?12:14,marginBottom:0,marginTop:0,paddingBottom:2*d.iI,paddingTop:2*d.iI,maxWidth:i},lineNumberStyle:{color:(b.content||s.Z.content).muted},language:n,showLineNumbers:t,style:u._4,useInlineStyles:!0,wrapLines:j,children:r})}}})}}}]);
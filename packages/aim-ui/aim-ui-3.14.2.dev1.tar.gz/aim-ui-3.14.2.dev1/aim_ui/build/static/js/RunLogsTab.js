(this.webpackJsonpui_v2=this.webpackJsonpui_v2||[]).push([[15],{1445:function(e,n,t){},1470:function(e,n,t){"use strict";t.r(n);var a=t(6),i=t(0),l=t.n(i),r=t(63),o=t(243),u=t(16),c=t.n(u),s=t(258),d=t(259),v=t(10),f=t(341),b=t(5),L=t(17),O=t(68),g=t(724),j=t(15),m=t(1);function h(e){var n,t=e.index,a=e.style,i=e.data;return Object(m.jsx)("div",{style:a,children:Object(m.jsx)("pre",{className:"LogRow__line",children:null===(n=i.logsList)||void 0===n?void 0:n[t-1]})})}h.displayName="RunLogsTab";var E,p=l.a.memo(h);!function(e){e.DEFAULT="default",e.LIVE_UPDATE="live-update",e.LOAD_MORE="load-more"}(E||(E={}));t(1445);function x(e){var n,t,i=e.isRunLogsLoading,u=e.runHash,h=e.runLogs,x=e.inProgress,D=e.updatedLogsCount,I=l.a.useRef(null),T=l.a.useRef(null),R=l.a.useRef({}),S=l.a.useRef({}),_=l.a.useRef(null),A=l.a.useState(E.DEFAULT),y=Object(a.a)(A,2),N=y[0],U=y[1],P=l.a.useState(O.a.Ok),w=Object(a.a)(P,2),k=w[0],F=w[1],V=l.a.useRef([0,0]),H=l.a.useState(null),M=Object(a.a)(H,2),z=M[0],C=M[1],B=l.a.useState(null),J=Object(a.a)(B,2),W=J[0],q=J[1],G=l.a.useState(0),K=Object(a.a)(G,2),Q=K[0],X=K[1],Y=l.a.useState(0),Z=Object(a.a)(Y,2),$=Z[0],ee=Z[1],ne=l.a.useState(null),te=Object(a.a)(ne,2),ae=te[0],ie=te[1];function le(){var e,n;U(E.LIVE_UPDATE),re({runHash:u,record_range:_.current?"".concat((null===(e=V.current)||void 0===e?void 0:e[1])>5?(null===(n=V.current)||void 0===n?void 0:n[1])-5:0,":"):"",isLiveUpdate:!0})}function re(e){F(O.a.Pending),S.current=g.a.getRunLogs(e),S.current.call().then((function(){F(O.a.Ok),oe(),function(){if(x){var e=window.setTimeout(le,3e3);I.current={intervalId:e}}}()}))}function oe(){var e,n,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(t||N===E.LIVE_UPDATE)&&(null===(n=S.current)||void 0===n||n.abort());(null===(e=I.current)||void 0===e?void 0:e.intervalId)&&clearInterval(I.current.intervalId)}return l.a.useEffect((function(){return re({runHash:u}),j.a(L.a.runDetails.tabs.logs.tabView),function(){oe(!0)}}),[]),l.a.useEffect((function(){x||oe()}),[x]),l.a.useEffect((function(){var e=r.a.sortBy(Object.values(null!==h&&void 0!==h?h:{}),"index"),n=r.a.sortBy(e.map((function(e){return+e.index}))),t=Array(3).fill("");V.current=[n[0],n[n.length-1]],ie(n),_.current=e.map((function(e){return e.value})).concat(t)}),[h]),l.a.useEffect((function(){var e,n,t,a,i=null!==(e=null===(n=_.current)||void 0===n?void 0:n.length)&&void 0!==e?e:0;if(N===E.LOAD_MORE&&W)null===(t=R.current)||void 0===t||null===(a=t.scrollToItem)||void 0===a||a.call(t,W.visibleStartIndex+D,"start"),U(E.DEFAULT);else if(N===E.LIVE_UPDATE&&W&&(null===W||void 0===W?void 0:W.visibleStopIndex)+D>=i-1||N===E.DEFAULT){var l,o;if(!r.a.isEmpty(ae))null===(l=R.current)||void 0===l||null===(o=l.scrollToItem)||void 0===o||o.call(l,i,"end")}else{var u,c,s;null===(u=R.current)||void 0===u||null===(c=u.scrollToItem)||void 0===c||c.call(u,null!==(s=null===W||void 0===W?void 0:W.visibleStartIndex)&&void 0!==s?s:0,"start")}}),[_.current,ae]),l.a.useEffect((function(){var e,n,t;N===E.DEFAULT&&Q&&$&&(r.a.isEmpty(ae)||null===(e=R.current)||void 0===e||null===(n=e.scrollToItem)||void 0===n||n.call(e,null!==(t=null===W||void 0===W?void 0:W.visibleStartIndex)&&void 0!==t?t:0,"start"))}),[Q,$]),Object(s.d)((function(){T.current&&(X(T.current.offsetHeight),ee(T.current.offsetWidth))}),T),Object(m.jsx)(v.a,{children:Object(m.jsx)(d.a,{isLoading:i&&N===E.DEFAULT,className:"runDetailParamsTabLoader",height:"100%",children:r.a.isEmpty(h)||r.a.isEmpty(ae)||r.a.isNil(_.current)?Object(m.jsx)(f.a,{size:"xLarge",className:"runDetailParamsTabLoader",title:"No Logs"}):Object(m.jsx)("div",{className:"RunDetailLogsTabWrapper",children:Object(m.jsx)("div",{className:"RunDetailLogsTab",children:Object(m.jsx)("div",{className:"Logs",ref:T,children:Object(m.jsxs)("div",{className:"Logs__wrapper",children:[Object(m.jsx)(o.d,{ref:R,height:Q||100,itemCount:(null===(n=_.current)||void 0===n?void 0:n.length)+1,itemSize:function(){return 15},width:"100%",overscanCount:100,initialScrollOffset:null!==z&&void 0!==z?z:15*(null===(t=_.current)||void 0===t?void 0:t.length),onItemsRendered:function(e){var n=e.visibleStartIndex,t=e.visibleStopIndex;q({visibleStartIndex:n,visibleStopIndex:t})},itemData:{logsList:_.current},onScroll:function(e){var n,t,a,i=e.scrollOffset,l=e.scrollDirection;C(i),i<=15&&ae&&0!==ae[0]&&"backward"===l&&(k===O.a.Ok||k===O.a.Pending&&N===E.LIVE_UPDATE)&&(oe(),U(E.LOAD_MORE),re({runHash:u,record_range:"".concat((null===(n=V.current)||void 0===n?void 0:n[0])>200?(null===(t=V.current)||void 0===t?void 0:t[0])-200:0,":").concat(null===(a=V.current)||void 0===a?void 0:a[0]),isLoadMore:!0}))},children:p},"".concat(Q).concat($)),Object(m.jsx)("div",{className:c()("overlay",{loading:i&&N===E.LOAD_MORE}),children:Object(m.jsx)(b.l,{size:24,thickness:4,color:"primary"})})]})})})})})})}x.displayName="RunLogsTab";var D=l.a.memo(x);n.default=D}}]);
//# sourceMappingURL=RunLogsTab.js.map?version=3c27f28c992d28c28a1d
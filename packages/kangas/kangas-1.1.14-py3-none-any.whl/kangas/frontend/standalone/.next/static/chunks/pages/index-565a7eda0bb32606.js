(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4158:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(508)}])},508:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return s},__next_rsc__:function(){return r},default:function(){return i}}),Promise.resolve().then(t.bind(t,3340)),Promise.resolve().then(t.bind(t,9025)),Promise.resolve().then(t.bind(t,6295)),Promise.resolve().then(t.bind(t,4958)),Promise.resolve().then(t.bind(t,5029)),Promise.resolve().then(t.bind(t,1437)),Promise.resolve().then(t.bind(t,9378)),Promise.resolve().then(t.bind(t,4980)),Promise.resolve().then(t.bind(t,1830)),Promise.resolve().then(t.bind(t,9933)),Promise.resolve().then(t.bind(t,7259)),Promise.resolve().then(t.bind(t,3682)),Promise.resolve().then(t.bind(t,8087)),Promise.resolve().then(t.bind(t,4731)),Promise.resolve().then(t.t.bind(t,5675,23)),Promise.resolve().then(t.bind(t,8882)),Promise.resolve().then(t.bind(t,7926)),Promise.resolve().then(t.bind(t,1918)),Promise.resolve().then(t.bind(t,7432)),Promise.resolve().then(t.bind(t,1925)),Promise.resolve().then(t.bind(t,4661));const r={server:!1,__webpack_require__:t};function i(){}const s=!0},4731:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(9816),s=t(6218);n.default=function(e){return e.sign?(0,r.jsx)(i.Z,{}):(0,r.jsx)(s.Z,{})}},1925:function(e,n,t){"use strict";t.r(n);var r=t(7568),i=t(4051),s=t.n(i),o=t(5893),l=t(5152),a=t.n(l),c=t(7294),u=t(1663),d=t(3682),h=a()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(0,c.useState)(null),i=t[0],l=t[1],a=(0,c.useState)(null),f=a[0],v=(a[1],(0,c.useContext)(d.ConfigContext)),m=((0,c.useRef)(Math.random()),(0,c.useCallback)((0,r.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v.apiUrl,"category"),{body:JSON.stringify(n),method:"post"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,l(r);case 7:case"end":return e.stop()}}),e)}))),[n]));(0,c.useEffect)((function(){m()}),[m]);var x=(0,c.useMemo)((function(){if(null===i||void 0===i?void 0:i.values)return Object.keys(i.values).sort().reduce((function(e,n){return e[n]=i.values[n],e}),{})}),[i]),j=(0,c.useMemo)((function(){if(x)return[{type:"bar",orientation:"h",x:Object.values(x),y:Object.keys(x),text:Object.keys(x).map((function(e){return"".concat(i.column,": ").concat(e," ").concat(i.message||"")})),marker:{color:Object.keys(x).map(u.Lq)}}]}),[x]),p=(0,c.useMemo)((function(){return{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bargap:.1,margin:{l:0,r:0,b:0,t:0,pad:0},showlegend:!1,xaxis:{visible:!0,showticklabels:!0},yaxis:{visible:!0,showticklabels:!0,type:"category"}}}),[f]);return"verbatim"===(null===i||void 0===i?void 0:i.type)?(0,o.jsx)("div",{className:"cell-verbatim",children:i.value}):(0,o.jsx)(h,{style:{height:"100%",width:"100%",maxHeight:"110px"},data:j,layout:p,config:{displayModeBar:!1}})}},4661:function(e,n,t){"use strict";t.r(n);var r=t(7568),i=t(4051),s=t.n(i),o=t(5893),l=t(5152),a=t.n(l),c=t(7294),u=t(1663),d=t(3682),h=a()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(0,c.useContext)(d.ConfigContext),i=(0,c.useState)(null),l=i[0],a=i[1],f=(0,c.useState)(null),v=(f[0],f[1]),m=((0,c.useRef)(Math.random()),(0,c.useCallback)((0,r.Z)(s().mark((function e(){var r,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t.apiUrl,"category"),{body:JSON.stringify(n),method:"post"});case 2:return r=e.sent,e.next=5,r.json();case 5:i=e.sent,a(i);case 7:case"end":return e.stop()}}),e)}))),[n]));(0,c.useEffect)((function(){m()}),[m]),(0,c.useLayoutEffect)((function(){var e=window.visualViewport;(null===e||void 0===e?void 0:e.width)&&(null===e||void 0===e?void 0:e.height)&&v({height:e.height,width:e.width})}),[]);var x=(0,c.useMemo)((function(){if(null===l||void 0===l?void 0:l.values)return Object.keys(l.values).sort().reduce((function(e,n){return e[n]=l.values[n],e}),{})}),[l]),j=(0,c.useMemo)((function(){if(x)return[{type:"bar",orientation:"h",x:Object.values(x),y:Object.keys(x),text:Object.keys(x).map((function(e){return"".concat(l.column,": ").concat(e," ").concat(l.message||"")})),marker:{color:Object.keys(x).map(u.Lq)}}]}),[x]),p=(0,c.useMemo)((function(){return{autosize:!0,title:"".concat(null===n||void 0===n?void 0:n.columnName),font:{family:"Roboto",size:22,color:"#191A1C"},xaxis:{font:{size:13,color:"#3D4355"}},yaxis:{type:"category"}}}),[n]);return"verbatim"===(null===l||void 0===l?void 0:l.type)?(0,o.jsx)("div",{className:"cell-verbatim-expanded",children:l.value}):(0,o.jsx)("div",{style:{minWidth:"500px"},children:(0,o.jsx)(h,{style:{height:"100%",width:"100%"},data:j,layout:p,config:{displayModeBar:!1}})})}},3682:function(e,n,t){"use strict";t.r(n),t.d(n,{ConfigContext:function(){return i}});var r=t(5893),i=(0,t(7294).createContext)({apiUrl:null,otherUrl:null});n.default=function(e){var n=e.apiUrl,t=e.otherUrl,s=e.children;return(0,r.jsx)(i.Provider,{value:{apiUrl:n,otherUrl:t},children:s})}},8087:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=(t(7294),s()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1}));n.default=function(e){var n=e.chartData,t=e.layout;return(0,r.jsx)(o,{data:n,layout:t,config:{displayModeBar:!1}})}},7259:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(4980);n.default=function(e){var n=e.children;return(0,r.jsx)("div",{className:"expand-overlay",children:(0,r.jsx)(i.default,{children:n})})}},7926:function(e,n,t){"use strict";t.r(n);var r=t(7568),i=t(4051),s=t.n(i),o=t(5893),l=t(5152),a=t.n(l),c=t(7294),u=t(1763),d=t(1663),h=t(3682),f=a()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(e.dgid,(0,c.useState)(null)),i=t[0],l=t[1],a=(0,c.useContext)(h.ConfigContext),v=(0,c.useCallback)((0,r.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a.apiUrl,"histogram"),{body:JSON.stringify(n),method:"post"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,l(r);case 7:case"end":return e.stop()}}),e)}))),[n]);(0,c.useEffect)((function(){v()}),[v]),(0,c.useEffect)((function(){console.log(n)}),[n]);var m=(0,c.useMemo)((function(){var e;return i?[{type:"bar",x:"DATETIME"===i.columnType?i.labels.map((function(e){return(0,u.Z)(e,"DATETIME")})):i.labels,y:i.bins,text:null===i||void 0===i||null===(e=i.labels)||void 0===e?void 0:e.map((function(e){return"".concat(i.column,": ").concat((0,u.Z)(e,i.columnType)," ").concat(i.message||"")})),marker:{color:(0,d.Lq)(i.column)}}]:null}),[i]),x=(0,c.useMemo)((function(){return{paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",autosize:!0,bargap:.1,margin:{l:0,r:0,b:0,t:0,pad:0},showlegend:!1,xaxis:{visible:!0,showticklabels:!0},yaxis:{visible:!0,showticklabels:!0}}}),[]),j=(0,c.useMemo)((function(){return{displayModeBar:!1}}));return"verbatim"===(null===i||void 0===i?void 0:i.type)?(0,o.jsx)("div",{className:"cell-verbatim",children:i.value}):(0,o.jsx)(f,{style:{height:"100%",width:"100%",maxHeight:"110px"},data:m,layout:x,config:j})}},7432:function(e,n,t){"use strict";t.r(n);var r=t(7568),i=t(4051),s=t.n(i),o=t(5893),l=t(5152),a=t.n(l),c=t(7294),u=t(1763),d=t(2825),h=t(1663),f=t(3682),v=a()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(e){var n=e.value,t=(e.dgid,(0,c.useState)(null)),i=t[0],l=t[1],a=(0,c.useContext)(f.ConfigContext),m=(0,c.useCallback)((0,r.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(a.apiUrl,"histogram"),{body:JSON.stringify(n),method:"post"});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,l(r);case 7:case"end":return e.stop()}}),e)}))),[n]);(0,c.useEffect)((function(){m()}),[m]);var x=(0,c.useMemo)((function(){var e;return i?[{type:"bar",x:"DATETIME"===i.columnType?i.labels.map((function(e){return(0,u.Z)(e,"DATETIME")})):i.labels,y:i.bins,text:null===i||void 0===i||null===(e=i.labels)||void 0===e?void 0:e.map((function(e){return"".concat(i.column,": ").concat((0,u.Z)(e,i.columnType)," ").concat(i.message||"")})),marker:{color:(0,h.Lq)(i.column)}}]:null}),[i]),j=(0,c.useMemo)((function(){return(null===i||void 0===i?void 0:i.statistics)?(e=i.statistics)?(0,o.jsx)("div",{style:{margin:"auto",marginLeft:"inherit"},children:Object.keys(e).map((function(n,t){return(0,o.jsxs)("ul",{style:{paddingLeft:"0"},children:[(0,o.jsx)("b",{children:n})," :"," ",(0,d.Z)(e[n],3).toLocaleString(a.locale)]})}))}):(0,o.jsx)("div",{}):(0,o.jsx)("div",{});var e}),[i]),p=(0,c.useMemo)((function(){return{autosize:!0,title:"".concat(null===i||void 0===i?void 0:i.column),font:{family:"Roboto",size:22,color:"#191A1C"},xaxis:{font:{size:13,color:"#3D4355"}},yaxis:{font:{size:13,color:"#3D4355"}}}}),[i]),g=(0,c.useMemo)((function(){return{displayModeBar:!1}}));return"verbatim"===(null===i||void 0===i?void 0:i.type)?(0,o.jsx)("div",{className:"cell-verbatim-expanded",children:i.value}):(0,o.jsxs)("div",{style:{minWidth:"600px",display:"flex"},children:[(0,o.jsx)(v,{style:{height:"100%",width:"75%"},data:x,layout:p,config:g}),j]})}},8882:function(e,n,t){"use strict";t.r(n),t.d(n,{CanvasContext:function(){return N},default:function(){return S}});var r=t(7568),i=t(872),s=t(1799),o=t(9396),l=t(828),a=t(9815),c=t(4051),u=t.n(c),d=t(5893),h=t(7294),f=(t(5152),t(7650)),v=t(4697),m=t(3682),x=t(1663),j=function(e){var n=e.label,t=e.hidden,r=e.addLabel,i=e.removeLabel,s=(0,h.useMemo)((function(){return t?"badge badge-label badge-disabled":"badge badge-label"}),[t]),o=(0,h.useMemo)((function(){return(0,x.Lq)(n)}),[n]),l=(0,h.useMemo)((function(){return(0,x.Qg)((0,x.Lq)(n))}),[n]),a=(0,h.useRef)(),c=(0,h.useCallback)((function(){r&&i&&(t?r(n):i(n))}),[t,n,r,i]);return(0,d.jsx)("div",{ref:a,className:s,style:{backgroundColor:o,color:l},onClick:c,children:"".concat(n)})},p=t(4980),g=t(8456),b=function(e){var n=e.url,t=e.drawImage,r=e.dgid,i=e.scoreBound,s=e.ref,o=(0,h.useRef)(),l=(0,h.useRef)(),a=(0,h.useState)(),c=a[0],u=a[1],f=(0,h.useState)([]),v=f[0],x=f[1],j=(0,h.useMemo)((function(){return new URL(n).searchParams.get("assetId")}),[n]),p=(0,h.useContext)(m.ConfigContext);(0,h.useEffect)((function(){fetch("/api/metadata",{body:JSON.stringify({assetId:j,dgid:r,url:"".concat(p.apiUrl,"asset-metadata")}),method:"POST"}).then((function(e){return e.json()})).then((function(e){return u(JSON.parse(e))}))}),[null===p||void 0===p?void 0:p.apiUrl,j,r]),(0,h.useEffect)((function(){var e;if(i&&(null===c||void 0===c?void 0:c.overlays)){var n=null===c||void 0===c||null===(e=c.overlays)||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.score)<i}));x(n.map((function(e){return e.label})))}}),[c,i]);var g=(0,h.useCallback)((function(){o&&l&&c&&t(o,l,c,v)}),[t,c,v]);return(0,h.useEffect)((function(){g()}),[g]),(0,d.jsxs)("div",{className:"canvas-container",ref:s,children:[(0,d.jsx)("canvas",{ref:o,className:"image-canvas"}),(0,d.jsx)("img",{ref:l,src:n,crossOrigin:"Anonymous",style:{display:"none"},onLoad:g,alt:"DataGrid Image"})]})},y=function(e){var n=e.url,t=e.drawImage,r=e.dgid,i=e.scoreBound,s=(0,f.YD)({threshold:0,rootMargin:"1000px",triggerOnce:!0}),o=s.ref,l=s.inView,a=(s.entry,(0,h.useRef)());return(0,d.jsxs)("div",{ref:o,children:[l&&(0,d.jsx)("div",{ref:a,children:(0,d.jsx)(b,{url:n,drawImage:t,dgid:r,scoreBound:i})}),!l&&(0,d.jsx)(g.Z,{})]})},N=(0,h.createContext)(),w=function(e){var n=e.urls,t=e.url,r=(e.isMulti,e.strValue),i=e.drawImage,s=e.assetId,o=e.dgid,l=e.filterLabels,a=e.scoreBound,c=(0,f.YD)({threshold:0,rootMargin:"10000px"}),u=c.ref,m=c.inView,x=(c.entry,(0,v.y1)((function(){N(Math.min(g+100,null===n||void 0===n?void 0:n.length))}),250));(0,h.useEffect)((function(){m&&x()}),[m,x]);var j=(0,h.useState)(100),g=j[0],N=j[1];return(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"image-title",children:r}),n?(0,d.jsxs)("div",{className:"canvas-grid",children:[n.slice(0,g).map((function(e,n){return(0,d.jsx)(p.default,{tabIndex:n,toggleElement:(0,d.jsx)(y,{url:e,drawImage:i,assetId:s,dgid:o,filterLabels:l,scoreBound:a,index:n}),children:(0,d.jsx)(k,{url:e,dgid:o,assetId:s})},e)})),(0,d.jsx)("div",{style:{width:"100%"},ref:u})]}):(0,d.jsx)(b,{url:t,drawImage:i,assetId:s,dgid:o,scoreBound:a})]})};var C=function(e){var n=e.label,t=e.children,r=(0,h.useState)(!1),i=r[0],s=r[1],o=(0,h.useCallback)((function(){s(!i)}),[i]);return(0,d.jsxs)("div",{className:"accordion",children:[(0,d.jsxs)("div",{className:"accordion-label",onClick:o,children:[(0,d.jsx)("div",{className:"arrow"}),n]}),(0,d.jsx)("div",{className:"accordion-content ".concat(i?"active":""),children:t})]})},k=function(e){var n=e.url,t=e.metadata,c=e.dgid,f=e.assetId,v=e.urls,p=(0,h.useContext)(m.ConfigContext),g=(0,h.useState)()[0],b=(0,h.useState)(!0),y=b[0],N=b[1],k=(0,h.useState)(!1),S=k[0],Z=k[1],M=(0,h.useState)(!1)[0],P=(0,h.useState)(1)[0],E=(0,h.useState)(1)[0],I=(0,h.useState)(),O=I[0],T=I[1],_=(0,h.useState)({min:0,max:1}),q=_[0],D=_[1],R=(0,h.useState)(),B=R[0],L=R[1],A=(0,h.useState)(new Set),z=A[0],F=A[1],U=(0,h.useState)(1),G=U[0],V=U[1],Y=(0,h.useMemo)((function(){return!!(null===v||void 0===v?void 0:v.length)}),[v]),J=(0,h.useRef)(),H=(0,h.useCallback)((0,r.Z)(u().mark((function e(){var r,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/metadata",{body:JSON.stringify({assetId:f||new URL(n).searchParams.get("assetId"),dgid:c,url:"".concat(p.apiUrl,"asset-metadata")}),method:"post"});case 4:return r=e.sent,e.next=7,r.json();case 7:i=e.sent,T(JSON.parse(i));case 9:case"end":return e.stop()}}),e)}))),[null===p||void 0===p?void 0:p.apiUrl,f,c,t,n]);(0,h.useEffect)((function(){if(t){var e=JSON.parse(t);e&&T(e)}else H()}),[t,H]);var W=(0,h.useCallback)((function(e){N(!e.target.checked)}),[]),K=(0,h.useCallback)((function(e){Z(e.target.checked)}),[]),X=(0,h.useCallback)((function(e){V(e.target.value)}),[]),Q=(0,h.useCallback)((function(e){L(e.target.value)}),[]);(0,h.useEffect)((function(){J.current.min=q.min,J.current.max=q.max}),[q]);var $=(0,h.useCallback)((function(e){var n=new Set(z);null===e||void 0===e||e.forEach((function(e){n.has(e)||n.add(e)})),F(n)}),[z]),ee=(0,h.useCallback)((function(e,n,t,r){if(t){var i=e.current.getContext("2d"),a=function(e,n,t,r){return t>r?t<e?Math.max(t/e,e/t):Math.min(t/e,e/t):r<n?Math.max(r/n,n/r):Math.min(r/n,n/r)}(400*G,400*G,n.current.naturalWidth,n.current.naturalHeight);if(e.current.width=n.current.naturalWidth*a,e.current.height=n.current.naturalHeight*a,i.clearRect(0,0,e.current.width,e.current.height),i.globalAlpha=P,g&&(i.drawImage(g,0,0,n.current.width*a,n.current.height*a),i.globalCompositeOperation="source-in"),i.imageSmoothingEnabled=y,i.drawImage(n.current,0,0,n.current.width*a,n.current.height*a),S){for(var c=i.getImageData(0,0,e.current.width,e.current.height),u=c.data,d=0;d<u.length;d+=4){var h=(u[d]+u[d+1]+u[d+2])/3;u[d]=h,u[d+1]=h,u[d+2]=h}i.putImageData(c,0,0)}if(M){for(var f=i.getImageData(0,0,e.current.width,e.current.height),v=f.data,m=0;m<v.length;m+=4)v[m]=255-v[m],v[m+1]=255-v[m+1],v[m+2]=255-v[m+2];i.putImageData(f,0,0)}if(null===t||void 0===t?void 0:t.overlays){i.globalAlpha=E;for(var j=0;j<(null===t||void 0===t?void 0:t.overlays.length);j++){var p,b;if(!r.includes(null===(p=t.overlays[j])||void 0===p?void 0:p.label)){if(null===(b=t.overlays[j])||void 0===b?void 0:b.score){var N=t.overlays[j].score;q.min>N&&D((0,o.Z)((0,s.Z)({},q),{min:N})),q.max<N&&D((0,o.Z)((0,s.Z)({},q),{max:N})),!Y&&B>N&&te(t.overlays[j].label)}if("regions"===(null===t||void 0===t?void 0:t.overlays[j].type)){var w=null===t||void 0===t?void 0:t.overlays[j].data;if(!z.has(null===t||void 0===t?void 0:t.overlays[j].label))for(var C=0;C<w.length;C++){var k=w[C];i.fillStyle=(0,x.Lq)(null===t||void 0===t?void 0:t.overlays[j].label),i.beginPath(),i.moveTo(k[0]*a,k[1]*a);for(var Z=2;Z<k.length;Z+=2)i.lineTo(k[Z]*a,k[Z+1]*a);i.closePath(),i.fill()}}else if("boxes"===(null===t||void 0===t?void 0:t.overlays[j].type)){var I=null===t||void 0===t?void 0:t.overlays[j].data;if(!z.has(null===t||void 0===t?void 0:t.overlays[j].label))for(var O=0;O<I.length;O++){var T=(0,l.Z)(I[O],2),_=(0,l.Z)(T[0],2),R=_[0],L=_[1],A=(0,l.Z)(T[1],2),F=A[0],U=A[1];i.strokeStyle=(0,x.Lq)(null===t||void 0===t?void 0:t.overlays[j].label),i.lineWidth=3,i.beginPath(),i.moveTo(R*a,L*a),i.lineTo(F*a,L*a),i.lineTo(F*a,U*a),i.lineTo(R*a,U*a),i.closePath(),i.stroke()}}else null===t||void 0===t||t.overlays[j].type}}}}}),[g,S,M,G,z,y,te,B,400,400,P,Y,E,q]),ne=(0,h.useCallback)((function(e){var n=new Set(z);n.has(e)&&n.delete(e),F(n)}),[z]),te=(0,h.useCallback)((function(e){var n=new Set(z);n.has(e)||n.add(e),F(n)}),[z]),re=(0,h.useMemo)((function(){return(null===O||void 0===O?void 0:O.labels)?Array.isArray(null===O||void 0===O?void 0:O.labels)?null===O||void 0===O?void 0:O.labels.sort():Object.keys(null===O||void 0===O?void 0:O.labels).sort():null}),[O]),ie=(0,h.useMemo)((function(){return(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.filename)||f}),[t,f]),se=(0,h.useMemo)((function(){return!O||Y?null:(null===O||void 0===O?void 0:O.overlays)?(0,i.Z)({},O):O}),[O,Y]);return(0,h.useEffect)((function(){if((null===O||void 0===O?void 0:O.overlays)&&B){var e=new Set(z),n=!0,t=!1,r=void 0;try{for(var i,s=((null===O||void 0===O?void 0:O.overlays)||{})[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var o=i.value;(null===o||void 0===o?void 0:o.score)&&((null===o||void 0===o?void 0:o.score)<=B&&e.add(null===o||void 0===o?void 0:o.label),(null===o||void 0===o?void 0:o.score)>B&&e.has(null===o||void 0===o?void 0:o.label)&&e.delete(null===o||void 0===o?void 0:o.label))}}catch(l){t=!0,r=l}finally{try{n||null==s.return||s.return()}finally{if(t)throw r}}z.size===e.size&&(0,a.Z)(z).every((function(n){return e.has(n)}))||F(e)}}),[O,B,z]),(0,d.jsxs)("div",{className:"editor-container",children:[(0,d.jsxs)("div",{className:"left-column",children:[(0,d.jsxs)("div",{className:"image-controls",children:[(0,d.jsxs)("div",{className:"checkbox",children:[(0,d.jsx)("input",{type:"checkbox",className:"image-smoothing-checkbox",id:"image-smoothing",onChange:W}),(0,d.jsx)("label",{htmlFor:"image-smoothing",className:"checkbox-label",children:"Pixelated"})]}),(0,d.jsxs)("div",{className:"checkbox",children:[(0,d.jsx)("input",{type:"checkbox",className:"grayscale-checkbox",id:"grayscale",onChange:K}),(0,d.jsx)("label",{htmlFor:"grayscale",className:"checkbox-label",children:"Grayscale"})]}),!Y&&(0,d.jsxs)("div",{className:"slider-container",children:[(0,d.jsx)("div",{className:"zoom-label",children:"Zoom:"}),(0,d.jsx)("input",{type:"range",min:"1",max:"5",defaultValue:"".concat(G),className:"zoom-slider",id:"zoom-slide",onChange:X,step:"0.01"})]})]}),se&&(0,d.jsx)("div",{className:"metadata-control",children:(0,d.jsx)(C,{label:"Metadata",children:(0,d.jsx)("pre",{children:(0,d.jsx)("code",{children:JSON.stringify(se,null,4)})})})}),(0,d.jsx)("div",{className:"score-control",children:(0,d.jsxs)("div",{className:"slider-container",children:[(0,d.jsx)("div",{className:"zoom-label",children:"Score:"}),(0,d.jsx)("input",{type:"range",ref:J,min:"0",max:"1",defaultValue:"0",className:"zoom-slider",id:"zoom-slide",step:"0.001",onChange:Q})]})}),(0,d.jsx)("div",{className:"labels-container",children:!!re&&re.map((function(e){return(0,d.jsx)(j,{label:e,hidden:z.has(e),addLabel:ne,removeLabel:te})}))})]}),(0,d.jsx)("div",{className:"right-column ".concat(Y&&"multi-canvas"),children:(0,d.jsx)(w,{urls:v,url:n,dgid:c,assetId:f,isMulti:Y,drawImage:ee,filterLabels:$,scoreBound:B,strValue:ie})})]})},S=k},1918:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7650);n.default=function(e){var n=e.children,t=(0,i.YD)({threshold:0,rootMargin:"1000px"}),s=t.ref,o=t.inView;t.entry;return(0,r.jsx)("div",{ref:s,children:o&&n})}},4980:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7294),s=t(8262);n.default=function(e){var n=e.toggleElement,t=e.children,o=e.sx,l=e.tabIndex,a=(0,i.useState)(!1),c=a[0],u=a[1],d=(0,i.useCallback)((function(){return u(!c)}),[c]),h=(0,i.useCallback)((function(){c||u(!0)}),[c]);return n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{tabIndex:l,onClick:h,children:n}),(0,r.jsx)(s.Z,{open:c,fullscreen:"true",onClose:d,sx:o,children:t})]}):(0,r.jsx)("div",{onClick:h,style:{height:"100%",width:"100%",opacity:"0",cursor:"pointer"},tabindex:l,children:(0,r.jsx)(s.Z,{open:c,fullscreen:"true",onClose:d,sx:o,children:t})})}},1437:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(1799),i=t(9396),s=t(9534),o=t(5893),l=t(7294),a=t(5152),c=t.n(a),u=t(7625),d=t(828),h=t(9815),f=t(7298),v=t(3792),m=t(887),x=t(2339),j=t(5587),p=t(4285),g=function(e){var n=(0,i.Z)((0,r.Z)({},e.innerProps),{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}}),t=(0,j.nB)({id:e.data.id}),s=t.attributes,l=t.listeners,a=t.setNodeRef,c=t.transform,u=t.transition,d={transform:p.ux.Transform.toString(c),transition:u};return(0,o.jsx)("div",(0,i.Z)((0,r.Z)({style:d,ref:a},s,l),{children:(0,o.jsx)(v.c.MultiValue,(0,i.Z)((0,r.Z)({},e),{innerProps:n}))}))},b=function(e){var n=(0,m.Zj)({id:"droppable"}),t=n.isOver,i=n.setNodeRef,s={color:t?"green":void 0};return(0,o.jsx)("div",{style:s,ref:i,children:(0,o.jsx)(v.c.MultiValueContainer,(0,r.Z)({},e))})},y=function(e){return(0,o.jsx)(v.c.MultiValueRemove,(0,i.Z)((0,r.Z)({},e),{innerProps:(0,r.Z)({onPointerDown:function(e){return e.stopPropagation()}},e.innerProps)}))},N=function(e){return(0,o.jsx)(v.c.Menu,(0,r.Z)({className:"react-select-list"},e))},w=function(e){var n=e.options,t=e.update,s=e.defaults,a=(0,d.Z)(l.useState(n),2),c=a[0],u=a[1],v=(0,l.useCallback)((function(){return t(c)}),[c]),p={valueContainer:function(e,n){return(0,i.Z)((0,r.Z)({},e),{overflow:"auto"})}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(m.LB,{modifiers:[x.F4],onDragEnd:function(e){var n=e.active,t=e.over;n&&t&&u((function(e){var r=e.findIndex((function(e){return e.id===n.id})),i=e.findIndex((function(e){return e.id===t.id}));return(0,j.Rp)(e,r,i)}))},children:(0,o.jsx)(j.Fo,{items:c,strategy:j.PG,children:(0,o.jsx)(f.default,{styles:p,distance:4,isMulti:!0,options:s,value:c,onChange:function(e){return u((0,h.Z)(e))},components:{MultiValue:g,MultiValueContainer:b,MultiValueRemove:y,Menu:N},closeMenuOnSelect:!1})})}),(0,o.jsx)("button",{onClick:v,children:"Save Changes"})]})},C=t(4199),k=c()((function(){return Promise.resolve().then(t.bind(t,7298))}),{ssr:!1}),S=function(e){var n=e.columns,t=e.query,a=e.defaultOptions,c=e.subtree,d=void 0===c?"":c,h=e.isMulti,f=void 0!==h&&h,v=e.subtrees,m=void 0===v?[]:v,x=(0,u.unstable_useRefreshRoot)(),j=(0,l.useState)(!1),p=(j[0],j[1],(0,l.useState)(null)),g=(p[0],p[1],(0,l.useState)(!1)),b=(g[0],g[1],(0,l.useMemo)((function(){return n.map((function(e,n){return{id:n+1,label:e,value:e}}))}),[n])),y=(0,l.useMemo)((function(){return null===a||void 0===a?void 0:a.map((function(e,n){return{id:n+1,label:e,value:e}}))}),[a]),N=(0,l.useMemo)((function(){var e=t[d]||t[m[0]];return b.find((function(n){return n.value===e}))||null}),[b,t]),S=(0,l.useCallback)((function(e){var n=e.map((function(e){return e.value}));x({query:(0,C.Z)(t,"",{select:n})})}),[t]),Z=(0,l.useCallback)((function(e){var n=e.value;if(m.length){var o=(0,r.Z)({},t),l=!0,a=!1,c=void 0;try{for(var u,h=m[Symbol.iterator]();!(l=(u=h.next()).done);l=!0){var f=u.value;o=(0,C.Z)(o,f,n)}}catch(p){a=!0,c=p}finally{try{l||null==h.return||h.return()}finally{if(a)throw c}}if(null===o||void 0===o?void 0:o.groupBy){o.limit,o.offset;var v=(0,s.Z)(o,["limit","offset"]);o=(0,i.Z)((0,r.Z)({},v),{limit:4})}else{o.limit,o.offset;var j=(0,s.Z)(o,["limit","offset"]);o=(0,i.Z)((0,r.Z)({},j),{limit:10})}x({query:o})}else x({query:(0,C.Z)(t,d,n)})}),[m,d,t]),M=(0,l.useCallback)((function(){var e=(0,r.Z)({},t);if("groupBy"===d||"groupBy"==m[0]){e.groupBy,e.sortBy;var n=(0,s.Z)(e,["groupBy","sortBy"]);e=(0,i.Z)((0,r.Z)({},n),{limit:10})}else if("sortBy"===d||"sortBy"==m[0]){e.sortBy;e=(0,s.Z)(e,["sortBy"])}x({query:e})}),[t,d,m]);return f?(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"alert",children:"You can drag and drop columns to sort them in the DataGrid"}),(0,o.jsx)(w,{options:b,update:S,defaults:y})]}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"select-modal-title",children:[(0,o.jsx)("div",{children:"Select a column"}),(0,o.jsx)("div",{className:"reset-button ".concat(N?"enabled":"disabled"),onClick:M,children:"Reset to default"})]}),(0,o.jsx)("div",{className:"select-modal-body",children:(0,o.jsx)(k,{options:b,value:N,onChange:Z})})]})}},1830:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return f}});var r=t(1799),i=t(9396),s=t(5893),o=t(7625),l=t(1217),a=t(7294),c=t(4980),u=function(){return(0,s.jsxs)("div",{className:"markdown-body",children:[(0,s.jsxs)("p",{dir:"auto",children:[(0,s.jsx)("b",{children:"DataGrid filter expressions"})," use Python syntax for selecting matching rows. To use the value of a column in the expression, enclosing the column name like ",(0,s.jsx)("code",{children:'{"Column Name"}'}),". Some examples:"]}),(0,s.jsx)("p",{dir:"auto",children:'To select all of the rows that have a fitness score less than 0.1, given that you have a column named "Fitness":'}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"fitness"} < 0.1'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("p",{dir:"auto",children:'Note that the column name is case-insensitive (i.e., you can use any case of letters inside quotes). Column values can be used any where in the filter expression. For example, if you wanted to select all of the rows where column "Score 1" was greater than or equal to "Score 2", you would write:'}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"score 1"} >= {"score 2"}'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("p",{dir:"auto",children:"You can use any of Python's operators, including:"}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"<"})," - less than"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"<="})," - less than or equal"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:">"})," - greater than"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:">="})," - greater than or equal"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"=="})," - equal to"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"!="})," - not equal to"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"is"})," - is the same (e.g., ",(0,s.jsx)("code",{children:"is None"}),")"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"is not"})," - is not the same (e.g."," ",(0,s.jsx)("code",{children:"is not None"}),")"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"+"})," - addition"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"-"})," - subtraction"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"*"})," - multiplication"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"/"})," - division"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"//"})," - integer division"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"**"})," - raise to a power"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"not"})," - flip the boolean value"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"in"})," - is value in a list of values"]})]}),(0,s.jsxs)("p",{dir:"auto",children:["Use ",(0,s.jsx)("code",{children:"is None"})," and ",(0,s.jsx)("code",{children:"is not None"})," for selecting rows that have null values. Otherwise, null values are ignored in most other uses."]}),(0,s.jsxs)("p",{dir:"auto",children:["You can combine comparisons using Python's ",(0,s.jsx)("code",{children:"and"})," and"," ",(0,s.jsx)("code",{children:"or"})," (use parentheses to force evaluation order different from Python's defaults):"]}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'(({"loss"} - {"base line"}) < 0.5) or ({"loss"} > 0.95)'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("h3",{dir:"auto",children:"JSON attribute access"}),(0,s.jsx)("p",{dir:"auto",children:"For JSON and metdata columns, you can use the dot operator to access values:"}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"Image"}.extension == "jpg"'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("p",{dir:"auto",children:"or nested values:"}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"Image"}.overlay.labels.contains("dog")'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsxs)("p",{dir:"auto",children:["See below for more information on ",(0,s.jsx)("code",{children:"contains()"})," and other string and JSON methods."]}),(0,s.jsx)("p",{dir:"auto",children:"Note that any mention of a column that contains an asset type (e.g., an image) will automatically reference its metadata."}),(0,s.jsx)("h3",{dir:"auto",children:"Python String and JSON methods"}),(0,s.jsx)("p",{dir:"auto",children:"These are mostly used with column values:"}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.contains(STRING)'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.endswith(STRING)'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.startswith(STRING)'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.strip()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.lstrip()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.rstrip()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.upper()'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'{"Column Name"}.lower()'})})]}),(0,s.jsx)("h3",{dir:"auto",children:"Python if/else expression"}),(0,s.jsx)("p",{dir:"auto",children:"You can use Python's if/else expression to return one value or another."}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'("low" if {"loss"} < 0.5 else "high") == "low"'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("h3",{dir:"auto",children:"Python Builtin Functions"}),(0,s.jsx)("p",{dir:"auto",children:"You can use any of these Python builtin functions:"}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"abs()"})," - absolute value"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"round()"})," - rounds to int"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"max(v1, v2, ...)"})," or ",(0,s.jsx)("code",{children:"max([v1, v2, ...])"})," ","- maximum of list of values"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"min(v1, v2, ...)"})," or ",(0,s.jsx)("code",{children:"min([v1, v2, ...])"})," ","- minimum of list of values"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{children:"len()"})," - length of item"]})]}),(0,s.jsx)("h3",{dir:"auto",children:"Aggregate Functions"}),(0,s.jsx)("p",{dir:"auto",children:"You can use the following aggregate functions. Note that these are more expensive to compute, as they require computing on all rows."}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'AVG({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'MAX({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'MIN({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'SUM({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'TOTAL({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'COUNT({"Column Name"})'})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:'STDEV({"Column Name"})'})})]}),(0,s.jsx)("p",{dir:"auto",children:"Examples:"}),(0,s.jsx)("p",{dir:"auto",children:"Find all rows that have a loss value less than the average:"}),(0,s.jsxs)("div",{className:"snippet-clipboard-content notranslate position-relative overflow-auto",children:[(0,s.jsx)("pre",{className:"notranslate",children:(0,s.jsx)("code",{children:'{"loss"} < AVG({"loss"})'})}),(0,s.jsx)("div",{className:"zeroclipboard-container position-absolute right-0 top-0"})]}),(0,s.jsx)("h3",{dir:"auto",children:"Python Library Functions and Values"}),(0,s.jsxs)("p",{dir:"auto",children:["Functions from Python's ",(0,s.jsx)("code",{children:"random"})," library:"]}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"random.random()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"random.randint()"})})]}),(0,s.jsx)("p",{dir:"auto",children:"Note that random values are regenerated on each call, and thus only have limited use. That means that every time the DataGrid is accessed, the values will change. This would result in bizarre results if you grouped or sorted by a random value."}),(0,s.jsxs)("p",{dir:"auto",children:["Functions and values from Python's ",(0,s.jsx)("code",{children:"math"})," library:"]}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.pi"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.sqrt()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.acos()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.acosh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.asin()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.asinh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.atan()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.atan2()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.atanh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.ceil()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.cos()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.cosh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.degrees()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.exp()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.floor()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.log()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.log10()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.log2()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.radians()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.sin()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.sinh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.tan()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.tanh()"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"math.trunc()"})})]}),(0,s.jsxs)("p",{dir:"auto",children:["Functions and values from Python's ",(0,s.jsx)("code",{children:"datetime"})," library:"]}),(0,s.jsxs)("ul",{dir:"auto",children:[(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"datetime.date(YEAR, MONTH, DAY)"})}),(0,s.jsx)("li",{children:(0,s.jsx)("code",{children:"datetime.datetime(YEAR, MONTH, DAY[, HOUR, MINUTE, SECOND])"})})]})]})},d=function(e){var n=e.callback;return(0,s.jsxs)("div",{className:"button-outline",onClick:n,children:[(0,s.jsx)("img",{src:"/filter_placeholder.png"})," ",(0,s.jsx)("span",{children:"Filter"})]})},h=function(){return(0,s.jsx)("div",{className:"button-outline",children:(0,s.jsx)("span",{children:"?"})})},f=function(e){var n=e.query,t=(0,o.unstable_useRefreshRoot)(),f=(0,a.useCallback)((function(e){"Enter"===e.key&&t({query:(0,i.Z)((0,r.Z)({},n),{whereExpr:null===filter||void 0===filter?void 0:filter.value,offset:0})})}),[n]),v=(0,a.useCallback)((function(e){var s=document.getElementById("filter");t({query:(0,i.Z)((0,r.Z)({},n),{whereExpr:null===s||void 0===s?void 0:s.value,offset:0})})}),[n]);return(0,a.useEffect)((function(){document.getElementById("filter").value=(null===n||void 0===n?void 0:n.whereExpr)||""}),[n]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{placeholder:"Use {}<>/ to filter",id:"filter",InputProps:{endAdornment:(0,s.jsx)(d,{callback:v})},onKeyPress:f}),(0,s.jsx)(c.default,{toggleElement:(0,s.jsx)(h,{}),children:(0,s.jsx)(u,{})})]})}},6295:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(7625),s=t(4199);n.default=function(e){var n=e.query,t=e.children,o=(0,i.unstable_useRefreshRoot)();return(0,r.jsx)("select",{name:"Group",id:"group",onChange:function(e){o({query:(0,s.Z)(n,"",{groupBy:e.target.value,sortBy:e.target.value,limit:1e9,offset:0})})},children:t})}},9933:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i)()((function(){return Promise.all([t.e(960),t.e(660)]).then(t.bind(t,8660))}),{loadableGenerated:{webpack:function(){return[8660]}},ssr:!1});n.default=function(){return(0,r.jsx)("div",{style:{display:"none"},children:(0,r.jsx)(s,{data:[{x:[1,2,3],y:[2,6,3],type:"scatter",mode:"lines+markers",marker:{color:"red"}},{type:"bar",x:[1,2,3],y:[2,5,3]}],layout:{width:320,height:240,title:"A Fancy Plot"}})})}},5029:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return c}});var r=t(1799),i=t(9396),s=t(5893),o=t(7625),l=(t(7294),t(7298)),a={dgid:null,limit:10,offset:0},c=function(e){var n=e.query,t=e.options,c=(0,o.unstable_useRefreshRoot)(),u={menuPortal:function(e){return(0,i.Z)((0,r.Z)({},e),{zIndex:9999})},menu:function(e){return(0,i.Z)((0,r.Z)({},e),{zIndex:9999})}};return(0,s.jsx)(l.default,{defaultValue:t.find((function(e){return e.value.endsWith(null===n||void 0===n?void 0:n.dgid)}))||"",options:t,styles:u,onChange:function(e){c({query:(0,i.Z)((0,r.Z)({},a),{dgid:e.value})})}})}},9025:function(e,n,t){"use strict";t.r(n);var r=t(1799),i=t(9396),s=t(5893),o=t(1838),l=t(7625),a=t(7294);n.default=function(e){var n,t=e.query,c=e.pagination,u=e.total,d=(0,l.unstable_useRefreshRoot)(),h=(0,a.useCallback)((function(e){var n=(e-1)*(null===t||void 0===t?void 0:t.limit);n<0||n===(null===t||void 0===t?void 0:t.offset)||e-1>=u/(null===t||void 0===t?void 0:t.limit)||d({query:(0,i.Z)((0,r.Z)({},t),{offset:n})})}),[t]),f=(0,a.useMemo)((function(){return(null===t||void 0===t?void 0:t.offset)?Math.ceil((null===t||void 0===t?void 0:t.offset)/(null===t||void 0===t?void 0:t.limit))+1:1}),[t]),v=(0,a.useCallback)((function(){h(f+1)}),[f,h]),m=(0,a.useCallback)((function(){h(f-1)}),[f,h]),x=u.toLocaleString(o.Z.locale);if(0==u)n="No matching rows";else if(1==u)n="Showing 1 matching row";else if(c.length>1){var j=(((null===t||void 0===t?void 0:t.offset)||0)+1).toLocaleString(o.Z.locale),p=Math.min(((null===t||void 0===t?void 0:t.offset)||0)+(null===t||void 0===t?void 0:t.limit),u).toLocaleString(o.Z.locale);n=(0,s.jsxs)(s.Fragment,{children:["Showing"," ",(0,s.jsx)("span",{style:{fontWeight:"500"},children:"".concat(j," - ").concat(p)})," ","rows of ",x," \xa0\xa0|\xa0\xa0"," "]})}else n="Showing all ".concat(x," matching rows");return(0,s.jsxs)("div",{className:"pages",children:[n,c.length>1&&(0,s.jsxs)(s.Fragment,{children:["Page: \xa0",(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return h(1)},children:"|<"})," ","\xa0",(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:m,children:"<"}),(0,s.jsx)("input",{type:"text",onChange:function(e){return h(e.target.value||1)},value:f,style:{width:"50px",margin:"0 8px",textAlign:"center",fontSize:"12px",fontWeight:"500"}}),(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:v,children:">"})," ","\xa0",(0,s.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return h(Math.ceil(u/(null===t||void 0===t?void 0:t.limit)))},children:">|"})]})]})}},9378:function(e,n,t){"use strict";t.r(n);var r=t(5893),i=t(5152),s=t.n(i),o=t(4980),l=t(1830),a=s()((function(){return Promise.resolve().then(t.bind(t,1437))}),{loadableGenerated:{webpack:function(){return[1437]}},ssr:!1}),c=s()((function(){return t.e(629).then(t.bind(t,1629))}),{loadableGenerated:{webpack:function(){return[1629]}},ssr:!1}),u=function(){return(0,r.jsxs)("div",{className:"button-outline",children:[(0,r.jsx)("img",{src:"/sort_icon.png"})," ",(0,r.jsx)("span",{children:"Sort"})]})},d=function(){return(0,r.jsxs)("div",{className:"button-outline",children:[(0,r.jsx)("img",{src:"/group_placeholder.png"})," ",(0,r.jsx)("span",{children:"Group by"})]})},h=function(){return(0,r.jsxs)("div",{className:"button-outline",children:[(0,r.jsx)("img",{src:"/columns_placeholder.png"})," ",(0,r.jsx)("span",{children:"Columns"})]})};n.default=function(e){var n=e.columns,t=e.query,i=e.options;return(0,r.jsxs)("div",{className:"select-row",children:[(0,r.jsx)(c,{toggleElement:(0,r.jsx)(d,{}),children:(0,r.jsx)(a,{query:t,subtrees:["groupBy","sortBy"],columns:n})}),(0,r.jsx)(c,{toggleElement:(0,r.jsx)(u,{}),children:(0,r.jsx)(a,{query:t,subtree:"sortBy",columns:n})}),(0,r.jsx)(o.default,{toggleElement:(0,r.jsx)(h,{}),sx:{"& .MuiDialog-container":{"& .MuiPaper-root":{width:"100%",maxWidth:"540px"}}},children:(0,r.jsx)(a,{query:t,isMulti:!0,columns:n,defaultOptions:i})}),(0,r.jsx)(l.default,{query:t})]})}},4958:function(e,n,t){"use strict";t.r(n);var r=t(1799),i=t(9396),s=t(5893),o=t(7625);n.default=function(e){var n=e.query,t=e.children,l=(0,o.unstable_useRefreshRoot)();return(0,s.jsx)("select",{name:"Sort",id:"sort",onChange:function(e){l({query:(0,i.Z)((0,r.Z)({},n),{sortBy:e.target.value,offset:0})})},children:t})}},3340:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}});var r=t(5893);function i(e){var n=e.children;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"main",children:(0,r.jsx)("div",{className:"page",children:n})})})}},1838:function(e,n,t){"use strict";var r=t(3454),i={apiUrl:"http://".concat(r.env.KANGAS_HOST,":").concat(r.env.KANGAS_BACKEND_PORT,"/datagrid/"),defaultDecimalPrecision:5,locale:"en-US"};n.Z=i},1763:function(e,n,t){"use strict";var r=t(1438),i=t(2951),s=t(2825);function o(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return String(e).padStart(n,t)}var l=function(){function e(n){(0,r.Z)(this,e),this.obj=new Date(1e3*n),this.year=o(this.obj.getFullYear(),4),this.month=o(this.obj.getDate(),2),this.day=o(this.obj.getDate(),2),this.hour=o(this.obj.getHours(),2),this.minute=o(this.obj.getMinutes(),2),this.second=o(this.obj.getSeconds(),2)}return(0,i.Z)(e,[{key:"format",value:function(){return"00"===this.hour&&"00"===this.minute&&"00"===this.second?"".concat(this.year,"-").concat(this.month,"-").concat(this.day):"".concat(this.year,"-").concat(this.month,"-").concat(this.day," ").concat(this.hour,":").concat(this.minute,":").concat(this.second)}}]),e}();n.Z=function(e,n){if(null===e)return"None";var t=e;return"DATETIME"===n?t=new l(e).format("YYYY-MM-DD HH:mm:ss"):"FLOAT"===n?t=(0,s.Z)(e).toString():"string"!==typeof e&&(t=e.toString()),t}},1663:function(e,n,t){"use strict";t.d(n,{Lq:function(){return s},Qg:function(){return o}});var r=t(9815),i=function(e){var n=["#ffd51d","#ffbd00","#ff8900","#fb7628","#ff4747","#e51772","#cf0057","#6e1d89","#860dab","#49a5bd","#0096c7","#00b4d8","#12a592","#16cab2","#41ead4"];return n[e%n.length]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";if(["1","true","t","yes"].includes(e.toLowerCase()))return"#12a592";if(["0","false","f","no"].includes(e.toLowerCase()))return"#cf0057";var n=(0,r.Z)(e).reduce((function(e,n){return n.charCodeAt(0)+((e<<5)-e)}),0);return i(Math.abs(n))},o=function(e){var n=function(e){var n=e.match(/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/);return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}(e),t=n[0],r=n[1],i=n[2];return Math.round((299*t+587*r+114*i)/1e3)>125?"black":"white"}},4199:function(e,n,t){"use strict";var r=t(1799);n.Z=function(e,n,t){return function(e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").trim();if(!t.length)return(0,r.Z)({},e,n);var i=t.match(/([^[.\]])+/g);return i.reduce((function(e,t,r){return void 0===e[t]&&(e[t]={}),r===i.length-1&&(e[t]=n),e[t]}),e),e}((0,r.Z)({},e),n,t)}},2825:function(e,n,t){"use strict";var r=t(828),i=t(1838);n.Z=function(e,n){var t=null!==n&&void 0!==n?n:i.Z.defaultDecimalPrecision;if(null===t)return e;var s=Number(e);if(isNaN(s))return e;if(Number.isInteger(s)||function(e){if(Math.floor(e)===e)return 0;var n=(0,r.Z)(e.toString().split("."),2)[1];return(void 0===n?"":n).length}(s)<=t)return s;var o=Math.pow(10,t);return Math.floor(s*o)/o}}},function(e){e.O(0,[774,213],(function(){return n=4158,e(e.s=n);var n}));var n=e.O();_N_E=n}]);